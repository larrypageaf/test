window.__require=function e(t,n,o){function r(s,a){if(!n[s]){if(!t[s]){var c=s.split("/");if(c=c[c.length-1],!t[c]){var u="function"==typeof __require&&__require;if(!a&&u)return u(c,!0);if(i)return i(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){return r(t[s][1][e]||e)},l,l.exports,e,t,n,o)}return n[s].exports}for(var i="function"==typeof __require&&__require,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(e,t,n){(function(e,o){"object"==typeof n&&void 0!==t?o(n):"function"==typeof define&&define.amd?define(["exports"],o):o((e="undefined"!=typeof globalThis?globalThis:e||self).schema={})})(this,function(e){"use strict";var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,n)};function n(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}function o(e,t,n,o){var r,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s}function r(e,t,n){if(n||2===arguments.length)for(var o,r=0,i=t.length;r<i;r++)!o&&r in t||(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}var i,s=255;e.OPERATION=void 0,(i=e.OPERATION||(e.OPERATION={}))[i.ADD=128]="ADD",i[i.REPLACE=0]="REPLACE",i[i.DELETE=64]="DELETE",i[i.DELETE_AND_ADD=192]="DELETE_AND_ADD",i[i.TOUCH=1]="TOUCH",i[i.CLEAR=10]="CLEAR";var a=function(){function e(){this.refs=new Map,this.refCounts={},this.deletedRefs=new Set,this.nextUniqueId=0}return e.prototype.getNextUniqueId=function(){return this.nextUniqueId++},e.prototype.addRef=function(e,t,n){void 0===n&&(n=!0),this.refs.set(e,t),n&&(this.refCounts[e]=(this.refCounts[e]||0)+1)},e.prototype.removeRef=function(e){this.refCounts[e]=this.refCounts[e]-1,this.deletedRefs.add(e)},e.prototype.clearRefs=function(){this.refs.clear(),this.deletedRefs.clear(),this.refCounts={}},e.prototype.garbageCollectDeletedRefs=function(){var e=this;this.deletedRefs.forEach(function(t){if(e.refCounts[t]<=0){var n=e.refs.get(t);if(n instanceof pe)for(var o in n._definition.schema)"string"!=typeof n._definition.schema[o]&&n[o]&&n[o].$changes&&e.removeRef(n[o].$changes.refId);else{var r=n.$changes.parent._definition,i=r.schema[r.fieldsByIndex[n.$changes.parentIndex]];"function"==typeof Object.values(i)[0]&&Array.from(n.values()).forEach(function(t){return e.removeRef(t.$changes.refId)})}e.refs.delete(t),delete e.refCounts[t]}}),this.deletedRefs.clear()},e}(),c=function(){function t(e,t,n){this.changed=!1,this.changes=new Map,this.allChanges=new Set,this.caches={},this.currentCustomOperation=0,this.ref=e,this.setParent(t,n)}return t.prototype.setParent=function(e,t,n){var o=this;if(this.indexes||(this.indexes=this.ref instanceof pe?this.ref._definition.indexes:{}),this.parent=e,this.parentIndex=n,t)if(this.root=t,this.ref instanceof pe){var r=this.ref._definition;for(var i in r.schema){var s=this.ref[i];if(s&&s.$changes){var a=r.indexes[i];s.$changes.setParent(this.ref,t,a)}}}else"object"==typeof this.ref&&this.ref.forEach(function(e,t){if(e instanceof pe){var n=e.$changes,r=o.ref.$changes.indexes[t];n.setParent(o.ref,o.root,r)}})},t.prototype.operation=function(e){this.changes.set(--this.currentCustomOperation,e)},t.prototype.change=function(t,n){void 0===n&&(n=e.OPERATION.ADD);var o="number"==typeof t?t:this.indexes[t];this.assertValidIndex(o,t);var r=this.changes.get(o);r&&r.op!==e.OPERATION.DELETE&&r.op!==e.OPERATION.TOUCH||this.changes.set(o,{op:r&&r.op===e.OPERATION.DELETE?e.OPERATION.DELETE_AND_ADD:n,index:o}),this.allChanges.add(o),this.changed=!0,this.touchParents()},t.prototype.touch=function(t){var n="number"==typeof t?t:this.indexes[t];this.assertValidIndex(n,t),this.changes.has(n)||this.changes.set(n,{op:e.OPERATION.TOUCH,index:n}),this.allChanges.add(n),this.touchParents()},t.prototype.touchParents=function(){this.parent&&this.parent.$changes.touch(this.parentIndex)},t.prototype.getType=function(e){if(this.ref._definition)return(t=this.ref._definition).schema[t.fieldsByIndex[e]];var t,n=(t=this.parent._definition).schema[t.fieldsByIndex[this.parentIndex]];return Object.values(n)[0]},t.prototype.getChildrenFilter=function(){var e=this.parent._definition.childFilters;return e&&e[this.parentIndex]},t.prototype.getValue=function(e){return this.ref.getByIndex(e)},t.prototype.delete=function(t){var n="number"==typeof t?t:this.indexes[t];if(void 0!==n){var o=this.getValue(n);this.changes.set(n,{op:e.OPERATION.DELETE,index:n}),this.allChanges.delete(n),delete this.caches[n],o&&o.$changes&&(o.$changes.parent=void 0),this.changed=!0,this.touchParents()}else console.warn("@colyseus/schema ".concat(this.ref.constructor.name,": trying to delete non-existing index: ").concat(t," (").concat(n,")"))},t.prototype.discard=function(t,n){var o=this;void 0===t&&(t=!1),void 0===n&&(n=!1),this.ref instanceof pe||this.changes.forEach(function(t){if(t.op===e.OPERATION.DELETE){var n=o.ref.getIndex(t.index);delete o.indexes[n]}}),this.changes.clear(),this.changed=t,n&&this.allChanges.clear(),this.currentCustomOperation=0},t.prototype.discardAll=function(){var e=this;this.changes.forEach(function(t){var n=e.getValue(t.index);n&&n.$changes&&n.$changes.discardAll()}),this.discard()},t.prototype.cache=function(e,t){this.caches[e]=t},t.prototype.clone=function(){return new t(this.ref,this.parent,this.root)},t.prototype.ensureRefId=function(){void 0===this.refId&&(this.refId=this.root.getNextUniqueId())},t.prototype.assertValidIndex=function(e,t){if(void 0===e)throw new Error('ChangeTree: missing index for field "'.concat(t,'"'))},t}(),u=function(e,t){var n=e.toString(),o=t.toString();return n<o?-1:n>o?1:0};function l(e){return e.$proxy=!0,new Proxy(e,{get:function(e,t){return"symbol"==typeof t||isNaN(t)?e[t]:e.at(t)},set:function(e,t,n){if("symbol"==typeof t||isNaN(t))e[t]=n;else{var o=Array.from(e.$items.keys()),r=parseInt(o[t]||t);null==n?e.deleteAt(r):e.setAt(r,n)}return!0},deleteProperty:function(e,t){return"number"==typeof t?e.deleteAt(t):delete e[t],!0}})}var f=function(){function t(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.$changes=new c(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,this.push.apply(this,e)}return t.is=function(e){return Array.isArray(e)||void 0!==e.array},Object.defineProperty(t.prototype,"length",{get:function(){return this.$items.size},set:function(e){0===e?this.clear():this.splice(e,this.length-e)},enumerable:!1,configurable:!0}),t.prototype.push=function(){for(var e,t=this,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return n.forEach(function(n){e=t.$refId++,t.setAt(e,n)}),e},t.prototype.pop=function(){var e=Array.from(this.$indexes.values()).pop();if(void 0!==e){this.$changes.delete(e),this.$indexes.delete(e);var t=this.$items.get(e);return this.$items.delete(e),t}},t.prototype.at=function(e){var t=Array.from(this.$items.keys())[e];return this.$items.get(t)},t.prototype.setAt=function(t,n){var o,r;void 0!==n.$changes&&n.$changes.setParent(this,this.$changes.root,t);var i=null!==(r=null===(o=this.$changes.indexes[t])||void 0===o?void 0:o.op)&&void 0!==r?r:e.OPERATION.ADD;this.$changes.indexes[t]=t,this.$indexes.set(t,t),this.$items.set(t,n),this.$changes.change(t,i)},t.prototype.deleteAt=function(e){var t=Array.from(this.$items.keys())[e];return void 0!==t&&this.$deleteAt(t)},t.prototype.$deleteAt=function(e){return this.$changes.delete(e),this.$indexes.delete(e),this.$items.delete(e)},t.prototype.clear=function(t){var n=this;this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),t&&"string"!=typeof this.$changes.getType()&&this.$items.forEach(function(e){n.$changes.root.removeRef(e.$changes.refId)}),this.$items.clear(),this.$changes.operation({index:0,op:e.OPERATION.CLEAR}),this.$changes.touchParents()},t.prototype.concat=function(){for(var e,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return new(t.bind.apply(t,r([void 0],(e=Array.from(this.$items.values())).concat.apply(e,n),!1)))},t.prototype.join=function(e){return Array.from(this.$items.values()).join(e)},t.prototype.reverse=function(){var e=this,t=Array.from(this.$items.keys());return Array.from(this.$items.values()).reverse().forEach(function(n,o){e.setAt(t[o],n)}),this},t.prototype.shift=function(){var e=Array.from(this.$items.keys()).shift();if(void 0!==e){var t=this.$items.get(e);return this.$deleteAt(e),t}},t.prototype.slice=function(e,n){return new(t.bind.apply(t,r([void 0],Array.from(this.$items.values()).slice(e,n),!1)))},t.prototype.sort=function(e){var t=this;void 0===e&&(e=u);var n=Array.from(this.$items.keys());return Array.from(this.$items.values()).sort(e).forEach(function(e,o){t.setAt(n[o],e)}),this},t.prototype.splice=function(e,t){void 0===t&&(t=this.length-e);for(var n=Array.from(this.$items.keys()),o=[],r=e;r<e+t;r++)o.push(this.$items.get(n[r])),this.$deleteAt(n[r]);return o},t.prototype.unshift=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=this.length,r=t.length,i=Array.from(this.$items.values());return t.forEach(function(t,n){e.setAt(n,t)}),i.forEach(function(t,n){e.setAt(r+n,t)}),o+r},t.prototype.indexOf=function(e,t){return Array.from(this.$items.values()).indexOf(e,t)},t.prototype.lastIndexOf=function(e,t){return void 0===t&&(t=this.length-1),Array.from(this.$items.values()).lastIndexOf(e,t)},t.prototype.every=function(e,t){return Array.from(this.$items.values()).every(e,t)},t.prototype.some=function(e,t){return Array.from(this.$items.values()).some(e,t)},t.prototype.forEach=function(e,t){Array.from(this.$items.values()).forEach(e,t)},t.prototype.map=function(e,t){return Array.from(this.$items.values()).map(e,t)},t.prototype.filter=function(e,t){return Array.from(this.$items.values()).filter(e,t)},t.prototype.reduce=function(e,t){return Array.prototype.reduce.apply(Array.from(this.$items.values()),arguments)},t.prototype.reduceRight=function(e,t){return Array.prototype.reduceRight.apply(Array.from(this.$items.values()),arguments)},t.prototype.find=function(e,t){return Array.from(this.$items.values()).find(e,t)},t.prototype.findIndex=function(e,t){return Array.from(this.$items.values()).findIndex(e,t)},t.prototype.fill=function(){throw new Error("ArraySchema#fill() not implemented")},t.prototype.copyWithin=function(){throw new Error("ArraySchema#copyWithin() not implemented")},t.prototype.toString=function(){return this.$items.toString()},t.prototype.toLocaleString=function(){return this.$items.toLocaleString()},t.prototype[Symbol.iterator]=function(){return Array.from(this.$items.values())[Symbol.iterator]()},t.prototype.entries=function(){return this.$items.entries()},t.prototype.keys=function(){return this.$items.keys()},t.prototype.values=function(){return this.$items.values()},t.prototype.includes=function(e,t){return Array.from(this.$items.values()).includes(e,t)},t.prototype.flatMap=function(){throw new Error("ArraySchema#flatMap() is not supported.")},t.prototype.flat=function(){throw new Error("ArraySchema#flat() is not supported.")},t.prototype.setIndex=function(e,t){this.$indexes.set(e,t)},t.prototype.getIndex=function(e){return this.$indexes.get(e)},t.prototype.getByIndex=function(e){return this.$items.get(this.$indexes.get(e))},t.prototype.deleteByIndex=function(e){var t=this.$indexes.get(e);this.$items.delete(t),this.$indexes.delete(e)},t.prototype.toArray=function(){return Array.from(this.$items.values())},t.prototype.toJSON=function(){return this.toArray().map(function(e){return"function"==typeof e.toJSON?e.toJSON():e})},t.prototype.clone=function(e){return e?new(t.bind.apply(t,r([void 0],Array.from(this.$items.values()),!1))):new(t.bind.apply(t,r([void 0],this.map(function(e){return e.$changes?e.clone():e}),!1)))},t.prototype.triggerAll=function(){pe.prototype.triggerAll.apply(this)},t}();function p(e){return e.$proxy=!0,new Proxy(e,{get:function(e,t){return"symbol"!=typeof t&&void 0===e[t]?e.get(t):e[t]},set:function(e,t,n){return"symbol"!=typeof t&&-1===t.indexOf("$")&&"onAdd"!==t&&"onRemove"!==t&&"onChange"!==t?e.set(t,n):e[t]=n,!0},deleteProperty:function(e,t){return e.delete(t),!0}})}var h=function(){function t(e){var n=this;if(this.$changes=new c(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,e)if(e instanceof Map||e instanceof t)e.forEach(function(e,t){return n.set(t,e)});else for(var o in e)this.set(o,e[o])}return t.is=function(e){return void 0!==e.map},t.prototype[Symbol.iterator]=function(){return this.$items[Symbol.iterator]()},Object.defineProperty(t.prototype,Symbol.toStringTag,{get:function(){return this.$items[Symbol.toStringTag]},enumerable:!1,configurable:!0}),t.prototype.set=function(t,n){if(null==n)throw new Error("MapSchema#set('".concat(t,"', ").concat(n,"): trying to set ").concat(n," value on '").concat(t,"'."));var o=void 0!==this.$changes.indexes[t],r=o?this.$changes.indexes[t]:this.$refId++,i=o?e.OPERATION.REPLACE:e.OPERATION.ADD,s=void 0!==n.$changes;return s&&n.$changes.setParent(this,this.$changes.root,r),o?s&&this.$items.get(t)!==n&&(i=e.OPERATION.ADD):(this.$changes.indexes[t]=r,this.$indexes.set(r,t)),this.$items.set(t,n),this.$changes.change(t,i),this},t.prototype.get=function(e){return this.$items.get(e)},t.prototype.delete=function(e){return this.$changes.delete(e),this.$items.delete(e)},t.prototype.clear=function(t){var n=this;this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),t&&"string"!=typeof this.$changes.getType()&&this.$items.forEach(function(e){n.$changes.root.removeRef(e.$changes.refId)}),this.$items.clear(),this.$changes.operation({index:0,op:e.OPERATION.CLEAR}),this.$changes.touchParents()},t.prototype.has=function(e){return this.$items.has(e)},t.prototype.forEach=function(e){this.$items.forEach(e)},t.prototype.entries=function(){return this.$items.entries()},t.prototype.keys=function(){return this.$items.keys()},t.prototype.values=function(){return this.$items.values()},Object.defineProperty(t.prototype,"size",{get:function(){return this.$items.size},enumerable:!1,configurable:!0}),t.prototype.setIndex=function(e,t){this.$indexes.set(e,t)},t.prototype.getIndex=function(e){return this.$indexes.get(e)},t.prototype.getByIndex=function(e){return this.$items.get(this.$indexes.get(e))},t.prototype.deleteByIndex=function(e){var t=this.$indexes.get(e);this.$items.delete(t),this.$indexes.delete(e)},t.prototype.toJSON=function(){var e={};return this.forEach(function(t,n){e[n]="function"==typeof t.toJSON?t.toJSON():t}),e},t.prototype.clone=function(e){var n;return e?n=Object.assign(new t,this):(n=new t,this.forEach(function(e,t){e.$changes?n.set(t,e.clone()):n.set(t,e)})),n},t.prototype.triggerAll=function(){pe.prototype.triggerAll.apply(this)},t}(),d={};function y(e,t){d[e]=t}function v(e){return d[e]}var g=function(){function e(){this.indexes={},this.fieldsByIndex={},this.deprecated={},this.descriptors={}}return e.create=function(t){var n=new e;return n.schema=Object.assign({},t&&t.schema||{}),n.indexes=Object.assign({},t&&t.indexes||{}),n.fieldsByIndex=Object.assign({},t&&t.fieldsByIndex||{}),n.descriptors=Object.assign({},t&&t.descriptors||{}),n.deprecated=Object.assign({},t&&t.deprecated||{}),n},e.prototype.addField=function(e,t){var n=this.getNextFieldIndex();this.fieldsByIndex[n]=e,this.indexes[e]=n,this.schema[e]=Array.isArray(t)?{array:t[0]}:t},e.prototype.addFilter=function(e,t){return this.filters||(this.filters={},this.indexesWithFilters=[]),this.filters[this.indexes[e]]=t,this.indexesWithFilters.push(this.indexes[e]),!0},e.prototype.addChildrenFilter=function(e,t){var n=this.indexes[e],o=this.schema[e];if(v(Object.keys(o)[0]))return this.childFilters||(this.childFilters={}),this.childFilters[n]=t,!0;console.warn("@filterChildren: field '".concat(e,"' can't have children. Ignoring filter."))},e.prototype.getChildrenFilter=function(e){return this.childFilters&&this.childFilters[this.indexes[e]]},e.prototype.getNextFieldIndex=function(){return Object.keys(this.schema||{}).length},e}(),m=function(){function e(){this.types={},this.schemas=new Map,this.useFilters=!1}return e.prototype.has=function(e){return this.schemas.has(e)},e.prototype.get=function(e){return this.types[e]},e.prototype.add=function(e,t){void 0===t&&(t=this.schemas.size),e._definition=g.create(e._definition),e._typeid=t,this.types[t]=e,this.schemas.set(e,t)},e.create=function(t){return void 0===t&&(t=new e),function(e){return b(e,t)}},e}(),_=new m;function b(e,t){return void 0===t&&(t=_),function(n,o){if(!e)throw new Error("Type not found. Ensure your `@type` annotations are correct and that you don't have any circular dependencies.");var i=n.constructor;i._context=t,t.has(i)||t.add(i);var s=i._definition;if(s.addField(o,e),s.descriptors[o]){if(s.deprecated[o])return;try{throw new Error("@colyseus/schema: Duplicate '".concat(o,"' definition on '").concat(i.name,"'.\nCheck @type() annotation"))}catch(v){var a=v.stack.split("\n")[4].trim();throw new Error("".concat(v.message," ").concat(a))}}var c=f.is(e),u=!c&&h.is(e);if("string"!=typeof e&&!pe.is(e)){var d=Object.values(e)[0];"string"==typeof d||t.has(d)||t.add(d)}var y="_".concat(o);s.descriptors[y]={enumerable:!1,configurable:!1,writable:!0},s.descriptors[o]={get:function(){return this[y]},set:function(e){e!==this[y]&&(null!=e?(!c||e instanceof f||(e=new(f.bind.apply(f,r([void 0],e,!1)))),!u||e instanceof h||(e=new h(e)),void 0===e.$proxy&&(u?e=p(e):c&&(e=l(e))),this.$changes.change(o),e.$changes&&e.$changes.setParent(this,this.$changes.root,this._definition.indexes[o])):this[y]&&this.$changes.delete(o),this[y]=e)},enumerable:!0,configurable:!0}}}function A(e){for(var t=0,n=0,o=0,r=e.length;o<r;o++)(t=e.charCodeAt(o))<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(o++,n+=4);return n}function O(e,t,n){for(var o=0,r=0,i=n.length;r<i;r++)(o=n.charCodeAt(r))<128?e[t++]=o:o<2048?(e[t++]=192|o>>6,e[t++]=128|63&o):o<55296||o>=57344?(e[t++]=224|o>>12,e[t++]=128|o>>6&63,e[t++]=128|63&o):(r++,o=65536+((1023&o)<<10|1023&n.charCodeAt(r)),e[t++]=240|o>>18,e[t++]=128|o>>12&63,e[t++]=128|o>>6&63,e[t++]=128|63&o)}function w(e,t){e.push(255&t)}function I(e,t){e.push(255&t)}function E(e,t){e.push(255&t),e.push(t>>8&255)}function P(e,t){e.push(255&t),e.push(t>>8&255)}function $(e,t){e.push(255&t),e.push(t>>8&255),e.push(t>>16&255),e.push(t>>24&255)}function x(e,t){var n=t>>24,o=t>>16,r=t>>8,i=t;e.push(255&i),e.push(255&r),e.push(255&o),e.push(255&n)}function S(e,t){var n=Math.floor(t/Math.pow(2,32));x(e,t>>>0),x(e,n)}function R(e,t){var n=t/Math.pow(2,32)>>0;x(e,t>>>0),x(e,n)}var C=new Int32Array(2),T=new Float32Array(C.buffer),M=new Float64Array(C.buffer);function N(e,t){T[0]=t,$(e,C[0])}function D(e,t){M[0]=t,$(e,C[0]),$(e,C[1])}function j(e,t){t||(t="");var n=A(t),o=0;if(n<32)e.push(160|n),o=1;else if(n<256)e.push(217),I(e,n),o=2;else if(n<65536)e.push(218),P(e,n),o=3;else{if(!(n<4294967296))throw new Error("String too long");e.push(219),x(e,n),o=5}return O(e,e.length,t),o+n}function U(e,t){return isNaN(t)?U(e,0):isFinite(t)?t!==(0|t)?(e.push(203),D(e,t),9):t>=0?t<128?(I(e,t),1):t<256?(e.push(204),I(e,t),2):t<65536?(e.push(205),P(e,t),3):t<4294967296?(e.push(206),x(e,t),5):(e.push(207),R(e,t),9):t>=-32?(e.push(224|t+32),1):t>=-128?(e.push(208),w(e,t),2):t>=-32768?(e.push(209),E(e,t),3):t>=-2147483648?(e.push(210),$(e,t),5):(e.push(211),S(e,t),9):U(e,t>0?Number.MAX_SAFE_INTEGER:-Number.MAX_SAFE_INTEGER)}var L=Object.freeze({__proto__:null,utf8Write:O,int8:w,uint8:I,int16:E,uint16:P,int32:$,uint32:x,int64:S,uint64:R,float32:function(e,t){N(e,t)},float64:function(e,t){D(e,t)},writeFloat32:N,writeFloat64:D,boolean:function(e,t){return I(e,t?1:0)},string:j,number:U});function F(e,t,n){for(var o="",r=0,i=t,s=t+n;i<s;i++){var a=e[i];0!=(128&a)?192!=(224&a)?224!=(240&a)?240!=(248&a)?console.error("Invalid byte "+a.toString(16)):(r=(7&a)<<18|(63&e[++i])<<12|(63&e[++i])<<6|(63&e[++i])<<0)>=65536?(r-=65536,o+=String.fromCharCode(55296+(r>>>10),56320+(1023&r))):o+=String.fromCharCode(r):o+=String.fromCharCode((15&a)<<12|(63&e[++i])<<6|(63&e[++i])<<0):o+=String.fromCharCode((31&a)<<6|63&e[++i]):o+=String.fromCharCode(a)}return o}function k(e,t){return G(e,t)<<24>>24}function G(e,t){return e[t.offset++]}function B(e,t){return V(e,t)<<16>>16}function V(e,t){return e[t.offset++]|e[t.offset++]<<8}function H(e,t){return e[t.offset++]|e[t.offset++]<<8|e[t.offset++]<<16|e[t.offset++]<<24}function J(e,t){return H(e,t)>>>0}function q(e,t){var n=J(e,t);return H(e,t)*Math.pow(2,32)+n}function z(e,t){var n=J(e,t);return J(e,t)*Math.pow(2,32)+n}var W=new Int32Array(2),K=new Float32Array(W.buffer),X=new Float64Array(W.buffer);function Y(e,t){return W[0]=H(e,t),K[0]}function Q(e,t){return W[0]=H(e,t),W[1]=H(e,t),X[0]}function Z(e,t){var n,o=e[t.offset++];o<192?n=31&o:217===o?n=G(e,t):218===o?n=V(e,t):219===o&&(n=J(e,t));var r=F(e,t.offset,n);return t.offset+=n,r}function ee(e,t){var n=e[t.offset++];return n<128?n:202===n?Y(e,t):203===n?Q(e,t):204===n?G(e,t):205===n?V(e,t):206===n?J(e,t):207===n?z(e,t):208===n?k(e,t):209===n?B(e,t):210===n?H(e,t):211===n?q(e,t):n>223?-1*(255-n+1):void 0}function te(e,t){return e[t.offset-1]===s&&(e[t.offset]<128||e[t.offset]>=202&&e[t.offset]<=211)}var ne=Object.freeze({__proto__:null,int8:k,uint8:G,int16:B,uint16:V,int32:H,uint32:J,float32:function(e,t){return Y(e,t)},float64:function(e,t){return Q(e,t)},int64:q,uint64:z,readFloat32:Y,readFloat64:Q,boolean:function(e,t){return G(e,t)>0},string:Z,stringCheck:function(e,t){var n=e[t.offset];return n<192&&n>160||217===n||218===n||219===n},number:ee,numberCheck:function(e,t){var n=e[t.offset];return n<128||n>=202&&n<=211},arrayCheck:function(e,t){return e[t.offset]<160},switchStructureCheck:te}),oe=function(){function t(e){var t=this;this.$changes=new c(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,e&&e.forEach(function(e){return t.add(e)})}return t.is=function(e){return void 0!==e.collection},t.prototype.add=function(e){var t=this.$refId++;return void 0!==e.$changes&&e.$changes.setParent(this,this.$changes.root,t),this.$changes.indexes[t]=t,this.$indexes.set(t,t),this.$items.set(t,e),this.$changes.change(t),t},t.prototype.at=function(e){var t=Array.from(this.$items.keys())[e];return this.$items.get(t)},t.prototype.entries=function(){return this.$items.entries()},t.prototype.delete=function(e){for(var t,n,o=this.$items.entries();(n=o.next())&&!n.done;)if(e===n.value[1]){t=n.value[0];break}return void 0!==t&&(this.$changes.delete(t),this.$indexes.delete(t),this.$items.delete(t))},t.prototype.clear=function(t){var n=this;this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),t&&"string"!=typeof this.$changes.getType()&&this.$items.forEach(function(e){n.$changes.root.removeRef(e.$changes.refId)}),this.$items.clear(),this.$changes.operation({index:0,op:e.OPERATION.CLEAR}),this.$changes.touchParents()},t.prototype.has=function(e){return Array.from(this.$items.values()).some(function(t){return t===e})},t.prototype.forEach=function(e){var t=this;this.$items.forEach(function(n,o){return e(n,o,t)})},t.prototype.values=function(){return this.$items.values()},Object.defineProperty(t.prototype,"size",{get:function(){return this.$items.size},enumerable:!1,configurable:!0}),t.prototype.setIndex=function(e,t){this.$indexes.set(e,t)},t.prototype.getIndex=function(e){return this.$indexes.get(e)},t.prototype.getByIndex=function(e){return this.$items.get(this.$indexes.get(e))},t.prototype.deleteByIndex=function(e){var t=this.$indexes.get(e);this.$items.delete(t),this.$indexes.delete(e)},t.prototype.toArray=function(){return Array.from(this.$items.values())},t.prototype.toJSON=function(){var e=[];return this.forEach(function(t){e.push("function"==typeof t.toJSON?t.toJSON():t)}),e},t.prototype.clone=function(e){var n;return e?n=Object.assign(new t,this):(n=new t,this.forEach(function(e){e.$changes?n.add(e.clone()):n.add(e)})),n},t.prototype.triggerAll=function(){pe.prototype.triggerAll.apply(this)},t}(),re=function(){function t(e){var t=this;this.$changes=new c(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,e&&e.forEach(function(e){return t.add(e)})}return t.is=function(e){return void 0!==e.set},t.prototype.add=function(t){var n,o;if(this.has(t))return!1;var r=this.$refId++;void 0!==t.$changes&&t.$changes.setParent(this,this.$changes.root,r);var i=null!==(o=null===(n=this.$changes.indexes[r])||void 0===n?void 0:n.op)&&void 0!==o?o:e.OPERATION.ADD;return this.$changes.indexes[r]=r,this.$indexes.set(r,r),this.$items.set(r,t),this.$changes.change(r,i),r},t.prototype.entries=function(){return this.$items.entries()},t.prototype.delete=function(e){for(var t,n,o=this.$items.entries();(n=o.next())&&!n.done;)if(e===n.value[1]){t=n.value[0];break}return void 0!==t&&(this.$changes.delete(t),this.$indexes.delete(t),this.$items.delete(t))},t.prototype.clear=function(t){var n=this;this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),t&&"string"!=typeof this.$changes.getType()&&this.$items.forEach(function(e){n.$changes.root.removeRef(e.$changes.refId)}),this.$items.clear(),this.$changes.operation({index:0,op:e.OPERATION.CLEAR}),this.$changes.touchParents()},t.prototype.has=function(e){for(var t,n=this.$items.values(),o=!1;(t=n.next())&&!t.done;)if(e===t.value){o=!0;break}return o},t.prototype.forEach=function(e){var t=this;this.$items.forEach(function(n,o){return e(n,o,t)})},t.prototype.values=function(){return this.$items.values()},Object.defineProperty(t.prototype,"size",{get:function(){return this.$items.size},enumerable:!1,configurable:!0}),t.prototype.setIndex=function(e,t){this.$indexes.set(e,t)},t.prototype.getIndex=function(e){return this.$indexes.get(e)},t.prototype.getByIndex=function(e){return this.$items.get(this.$indexes.get(e))},t.prototype.deleteByIndex=function(e){var t=this.$indexes.get(e);this.$items.delete(t),this.$indexes.delete(e)},t.prototype.toArray=function(){return Array.from(this.$items.values())},t.prototype.toJSON=function(){var e=[];return this.forEach(function(t){e.push("function"==typeof t.toJSON?t.toJSON():t)}),e},t.prototype.clone=function(e){var n;return e?n=Object.assign(new t,this):(n=new t,this.forEach(function(e){e.$changes?n.add(e.clone()):n.add(e)})),n},t.prototype.triggerAll=function(){pe.prototype.triggerAll.apply(this)},t}(),ie=function(){function e(){this.handlers=[]}return e.prototype.register=function(e){return this.handlers.push(e),this},e.prototype.invoke=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.handlers.forEach(function(t){return t.apply(void 0,e)})},e.prototype.invokeAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Promise.all(this.handlers.map(function(t){return t.apply(void 0,e)}))},e.prototype.remove=function(e){var t=this.handlers.indexOf(e);this.handlers[t]=this.handlers[this.handlers.length-1],this.handlers.pop()},e.prototype.clear=function(){this.handlers=[]},e}(),se=function(){function e(){this.refIds=new WeakSet,this.containerIndexes=new WeakMap}return e.prototype.addRefId=function(e){this.refIds.has(e)||(this.refIds.add(e),this.containerIndexes.set(e,new Set))},e.get=function(t){return void 0===t.$filterState&&(t.$filterState=new e),t.$filterState},e}(),ae=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(Error);function ce(e,t,n,o){var r,i=!1;switch(t){case"number":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":case"int64":case"uint64":case"float32":case"float64":r="number",isNaN(e)&&console.log('trying to encode "NaN" in '.concat(n.constructor.name,"#").concat(o));break;case"string":r="string",i=!0;break;case"boolean":return}if(typeof e!==r&&(!i||i&&null!==e)){var s="'".concat(JSON.stringify(e),"'").concat(e&&e.constructor&&" (".concat(e.constructor.name,")")||"");throw new ae("a '".concat(r,"' was expected, but ").concat(s," was provided in ").concat(n.constructor.name,"#").concat(o))}}function ue(e,t,n,o){if(!(e instanceof t))throw new ae("a '".concat(t.name,"' was expected, but '").concat(e.constructor.name,"' was provided in ").concat(n.constructor.name,"#").concat(o))}function le(e,t,n,o,r){ce(n,e,o,r);var i=L[e];if(!i)throw new ae("a '".concat(e,"' was expected, but ").concat(n," was provided in ").concat(o.constructor.name,"#").concat(r));i(t,n)}function fe(e,t,n){return ne[e](t,n)}var pe=function(){function t(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Object.defineProperties(this,{$changes:{value:new c(this,void 0,new a),enumerable:!1,writable:!0},$listeners:{value:{},enumerable:!1,writable:!0}});var n=this._definition.descriptors;n&&Object.defineProperties(this,n),e[0]&&this.assign(e[0])}return t.onError=function(e){console.error(e)},t.is=function(e){return e._definition&&void 0!==e._definition.schema},t.prototype.assign=function(e){return Object.assign(this,e),this},Object.defineProperty(t.prototype,"_definition",{get:function(){return this.constructor._definition},enumerable:!1,configurable:!0}),t.prototype.listen=function(e,t){var n=this;return this.$listeners[e]||(this.$listeners[e]=new ie),this.$listeners[e].register(t),function(){return n.$listeners[e].remove(t)}},t.prototype.decode=function(n,o,r,i){void 0===o&&(o={offset:0}),void 0===r&&(r=this),void 0===i&&(i=new Map);var a=this.$changes.root,c=n.length,u=0,l=[];for(a.refs.set(u,this),i.set(u,l);o.offset<c;){var p=n[o.offset++];if(p!=s){var d=r.$changes,y=void 0!==r._definition,g=y?p>>6<<6:p;if(g!==e.OPERATION.CLEAR){var m=y?p%(g||255):ee(n,o),_=y?r._definition.fieldsByIndex[m]:"",b=d.getType(m),A=void 0,O=void 0,w=void 0;if(y?O=r["_".concat(_)]:(O=r.getByIndex(m),(g&e.OPERATION.ADD)===e.OPERATION.ADD?(w=r instanceof h?Z(n,o):m,r.setIndex(m,w)):w=r.getIndex(m)),(g&e.OPERATION.DELETE)===e.OPERATION.DELETE&&(g!==e.OPERATION.DELETE_AND_ADD&&r.deleteByIndex(m),O&&O.$changes&&a.removeRef(O.$changes.refId),A=null),void 0!==_){if(g===e.OPERATION.DELETE);else if(t.is(b)){var I=ee(n,o);if(A=a.refs.get(I),g!==e.OPERATION.REPLACE){var E=this.getSchemaType(n,o,b);A||((A=this.createTypeInstance(E)).$changes.refId=I,O&&(A.onChange=O.onChange,A.onRemove=O.onRemove,A.$listeners=O.$listeners,O.$changes.refId&&I!==O.$changes.refId&&a.removeRef(O.$changes.refId))),a.addRef(I,A,A!==O)}}else if("string"==typeof b)A=fe(b,n,o);else{var P=v(Object.keys(b)[0]),$=ee(n,o),x=a.refs.has($)?O||a.refs.get($):new P.constructor;if((A=x.clone(!0)).$changes.refId=$,O&&(A.onAdd=O.onAdd,A.onRemove=O.onRemove,A.onChange=O.onChange,O.$changes.refId&&$!==O.$changes.refId)){a.removeRef(O.$changes.refId);for(var S=[],R=O.entries(),C=void 0;(C=R.next())&&!C.done;){var T=C.value,M=T[0],N=T[1];S.push({op:e.OPERATION.DELETE,field:M,value:void 0,previousValue:N})}i.set(O.$changes.refId,S)}a.addRef($,A,x!==O),P.getProxy&&(A=P.getProxy(A))}var D=O!==A;if(null!=A)if(A.$changes&&A.$changes.setParent(d.ref,d.root,m),r instanceof t)r[_]=A;else if(r instanceof h)M=w,r.$items.set(M,A),r.$changes.allChanges.add(m);else if(r instanceof f)r.setAt(m,A);else if(r instanceof oe){var j=r.add(A);r.setIndex(m,j)}else r instanceof re&&!1!==(j=r.add(A))&&r.setIndex(m,j);D&&l.push({op:g,field:_,dynamicIndex:w,value:A,previousValue:O})}else{console.warn("@colyseus/schema: definition mismatch");for(var U={offset:o.offset};o.offset<c&&(!te(n,o)||(U.offset=o.offset+1,!a.refs.has(ee(n,U))));)o.offset++}}else r.clear(!0)}else{u=ee(n,o);var L=a.refs.get(u);if(!L)throw new Error('"refId" not found: '.concat(u));r=L,l=[],i.set(u,l)}}return this._triggerChanges(i),a.garbageCollectDeletedRefs(),i},t.prototype.encode=function(n,o,r){void 0===n&&(n=!1),void 0===o&&(o=[]),void 0===r&&(r=!1);for(var i=this.$changes,a=new WeakSet,c=[i],u=1,l=0;l<u;l++){var f=c[l],p=f.ref,d=p instanceof t;f.ensureRefId(),a.add(f),f!==i&&(f.changed||n)&&(I(o,s),U(o,f.refId));for(var y=n?Array.from(f.allChanges):Array.from(f.changes.values()),g=0,m=y.length;g<m;g++){var _=n?{op:e.OPERATION.ADD,index:y[g]}:y[g],b=_.index,A=d?p._definition.fieldsByIndex&&p._definition.fieldsByIndex[b]:b,O=o.length;if(_.op!==e.OPERATION.TOUCH)if(d)I(o,b|_.op);else{if(I(o,_.op),_.op===e.OPERATION.CLEAR)continue;U(o,b)}if(d||(_.op&e.OPERATION.ADD)!=e.OPERATION.ADD||p instanceof h&&j(o,f.ref.$indexes.get(b)),_.op!==e.OPERATION.DELETE){var w=f.getType(b),E=f.getValue(b);if(E&&E.$changes&&!a.has(E.$changes)&&(c.push(E.$changes),E.$changes.ensureRefId(),u++),_.op!==e.OPERATION.TOUCH){if(t.is(w))ue(E,w,p,A),U(o,E.$changes.refId),(_.op&e.OPERATION.ADD)===e.OPERATION.ADD&&this.tryEncodeTypeId(o,w,E.constructor);else if("string"==typeof w)le(w,o,E,p,A);else{var P=v(Object.keys(w)[0]);ue(p["_".concat(A)],P.constructor,p,A),U(o,E.$changes.refId)}r&&f.cache(b,o.slice(O))}}}n||r||f.discard()}return o},t.prototype.encodeAll=function(e){return this.encode(!0,[],e)},t.prototype.applyFilters=function(n,o){var r,i;void 0===o&&(o=!1);for(var a=this,c=new Set,u=se.get(n),l=[this.$changes],f=1,p=[],d=function(d){var y=l[d];if(c.has(y.refId))return"continue";var v=y.ref,g=v instanceof t;I(p,s),U(p,y.refId);var m=u.refIds.has(y),_=o||!m;u.addRefId(y);var b=u.containerIndexes.get(y),A=_?Array.from(y.allChanges):Array.from(y.changes.values());!o&&g&&v._definition.indexesWithFilters&&v._definition.indexesWithFilters.forEach(function(t){!b.has(t)&&y.allChanges.has(t)&&(_?A.push(t):A.push({op:e.OPERATION.ADD,index:t}))});for(var O=0,w=A.length;O<w;O++){var E=_?{op:e.OPERATION.ADD,index:A[O]}:A[O];if(E.op!==e.OPERATION.CLEAR){var P=E.index;if(E.op!==e.OPERATION.DELETE){var $=y.getValue(P),x=y.getType(P);if(g){if((S=v._definition.filters&&v._definition.filters[P])&&!S.call(v,n,$,a)){$&&$.$changes&&c.add($.$changes.refId);continue}}else{var S,R=y.parent;if((S=y.getChildrenFilter())&&!S.call(R,n,v.$indexes.get(P),$,a)){$&&$.$changes&&c.add($.$changes.refId);continue}}if($.$changes&&(l.push($.$changes),f++),E.op!==e.OPERATION.TOUCH)if(E.op===e.OPERATION.ADD||g)p.push.apply(p,null!==(r=y.caches[P])&&void 0!==r?r:[]),b.add(P);else if(b.has(P))p.push.apply(p,null!==(i=y.caches[P])&&void 0!==i?i:[]);else{if(b.add(P),I(p,e.OPERATION.ADD),U(p,P),v instanceof h){var C=y.ref.$indexes.get(P);j(p,C)}$.$changes?U(p,$.$changes.refId):L[x](p,$)}else $.$changes&&!g&&(I(p,e.OPERATION.ADD),U(p,P),v instanceof h&&(C=y.ref.$indexes.get(P),j(p,C)),U(p,$.$changes.refId))}else g?I(p,E.op|P):(I(p,E.op),U(p,P))}else I(p,E.op)}},y=0;y<f;y++)d(y);return p},t.prototype.clone=function(){var e,t=new this.constructor,n=this._definition.schema;for(var o in n)"object"==typeof this[o]&&"function"==typeof(null===(e=this[o])||void 0===e?void 0:e.clone)?t[o]=this[o].clone():t[o]=this[o];return t},t.prototype.triggerAll=function(){if(0!==this.$changes.root.refs.size){var e=new Map;t.prototype._triggerAllFillChanges.call(this,this,e);try{t.prototype._triggerChanges.call(this,e)}catch(n){t.onError(n)}}},t.prototype.toJSON=function(){var e=this._definition.schema,t=this._definition.deprecated,n={};for(var o in e)t[o]||null===this[o]||void 0===this[o]||(n[o]="function"==typeof this[o].toJSON?this[o].toJSON():this["_".concat(o)]);return n},t.prototype.discardAllChanges=function(){this.$changes.discardAll()},t.prototype.getByIndex=function(e){return this[this._definition.fieldsByIndex[e]]},t.prototype.deleteByIndex=function(e){this[this._definition.fieldsByIndex[e]]=void 0},t.prototype.tryEncodeTypeId=function(e,t,n){t._typeid!==n._typeid&&(I(e,213),U(e,n._typeid))},t.prototype.getSchemaType=function(e,t,n){var o;return 213===e[t.offset]&&(t.offset++,o=this.constructor._context.get(ee(e,t))),o||n},t.prototype.createTypeInstance=function(e){var t=new e;return t.$changes.root=this.$changes.root,t},t.prototype._triggerAllFillChanges=function(n,o){if(!o.has(n.$changes.refId)){var r=[];if(o.set(n.$changes.refId||0,r),n instanceof t){var i=n._definition.schema;for(var s in i)void 0!==(f=n["_".concat(s)])&&(r.push({op:e.OPERATION.ADD,field:s,value:f,previousValue:void 0}),void 0!==f.$changes&&t.prototype._triggerAllFillChanges.call(this,f,o))}else for(var a=n.entries(),c=void 0;(c=a.next())&&!c.done;){var u=c.value,l=u[0],f=u[1];r.push({op:e.OPERATION.ADD,field:l,dynamicIndex:l,value:f,previousValue:void 0}),void 0!==f.$changes&&t.prototype._triggerAllFillChanges.call(this,f,o)}}},t.prototype._triggerChanges=function(n){var o=this;n.forEach(function(n,r){var i,s,a,c,u,l,f,p,h,d,y,v;if(n.length>0){for(var g=o.$changes.root.refs.get(r),m=g instanceof t,_=0;_<n.length;_++){var b=n[_],A=g.$listeners&&g.$listeners[b.field];if(m||(b.op===e.OPERATION.ADD&&void 0===b.previousValue?null===(s=(i=g).onAdd)||void 0===s||s.call(i,b.value,null!==(a=b.dynamicIndex)&&void 0!==a?a:b.field):b.op===e.OPERATION.DELETE?void 0!==b.previousValue&&(null===(u=(c=g).onRemove)||void 0===u||u.call(c,b.previousValue,null!==(l=b.dynamicIndex)&&void 0!==l?l:b.field)):b.op===e.OPERATION.DELETE_AND_ADD?(void 0!==b.previousValue&&(null===(p=(f=g).onRemove)||void 0===p||p.call(f,b.previousValue,b.dynamicIndex)),null===(d=(h=g).onAdd)||void 0===d||d.call(h,b.value,b.dynamicIndex)):b.op!==e.OPERATION.REPLACE&&b.value===b.previousValue||null===(v=(y=g).onChange)||void 0===v||v.call(y,b.value,b.dynamicIndex)),(b.op&e.OPERATION.DELETE)===e.OPERATION.DELETE&&b.previousValue instanceof t&&b.previousValue.onRemove&&b.previousValue.onRemove(),A)try{A.invoke(b.value,b.previousValue)}catch(O){t.onError(O)}}if(m&&g.onChange)try{g.onChange(n)}catch(O){t.onError(O)}}})},t._definition=g.create(),t}(),he=new m,de=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),o([b("string",he)],t.prototype,"name",void 0),o([b("string",he)],t.prototype,"type",void 0),o([b("number",he)],t.prototype,"referencedType",void 0),t}(pe),ye=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fields=new f,t}return n(t,e),o([b("number",he)],t.prototype,"id",void 0),o([b([de],he)],t.prototype,"fields",void 0),t}(pe),ve=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.types=new f,t}return n(t,e),t.encode=function(e){var n=e.constructor,o=new t;o.rootType=n._typeid;var r=function(e,t){for(var n in t){var r=new de;r.name=n;var i=void 0;if("string"==typeof t[n])i=t[n];else{var s=t[n],a=void 0;pe.is(s)?(i="ref",a=t[n]):"string"==typeof s[i=Object.keys(s)[0]]?i+=":"+s[i]:a=s[i],r.referencedType=a?a._typeid:-1}r.type=i,e.fields.push(r)}o.types.push(e)},i=n._context.types;for(var s in i){var a=new ye;a.id=Number(s),r(a,i[s]._definition.schema)}return o.encodeAll()},t.decode=function(e,o){var r=new m,i=new t;i.decode(e,o);var s=i.types.reduce(function(e,t){var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(pe),i=t.id;return e[i]=o,r.add(o,i),e},{});i.types.forEach(function(e){var t=s[e.id];e.fields.forEach(function(e){var n;if(void 0!==e.referencedType){var o=e.type,i=s[e.referencedType];if(!i){var a=e.type.split(":");o=a[0],i=a[1]}"ref"===o?b(i,r)(t.prototype,e.name):b(((n={})[o]=i,n),r)(t.prototype,e.name)}else b(e.type,r)(t.prototype,e.name)})});var a=s[i.rootType],c=new a;for(var u in a._definition.schema){var l=a._definition.schema[u];"string"!=typeof l&&(c[u]="function"==typeof l?new l:new(v(Object.keys(l)[0]).constructor))}return c},o([b([ye],he)],t.prototype,"types",void 0),o([b("number",he)],t.prototype,"rootType",void 0),t}(pe);y("map",{constructor:h,getProxy:p}),y("array",{constructor:f,getProxy:l}),y("set",{constructor:re}),y("collection",{constructor:oe}),e.ArraySchema=f,e.CollectionSchema=oe,e.Context=m,e.MapSchema=h,e.Reflection=ve,e.ReflectionField=de,e.ReflectionType=ye,e.Schema=pe,e.SchemaDefinition=g,e.SetSchema=re,e.decode=ne,e.defineTypes=function(e,t,n){for(var o in void 0===n&&(n=e._context||_),t)b(t[o],n)(e.prototype,o);return e},e.deprecated=function(e){return void 0===e&&(e=!0),function(t,n){var o=t.constructor._definition;o.deprecated[n]=!0,e&&(o.descriptors[n]={get:function(){throw new Error("".concat(n," is deprecated."))},set:function(){},enumerable:!1,configurable:!0})}},e.dumpChanges=function(e){for(var t=[e.$changes],n={},o=n,r=function(e){var n=t[e];n.changes.forEach(function(e){var t=n.ref,r=e.index,i=t._definition?t._definition.fieldsByIndex[r]:t.$indexes.get(r);o[i]=n.getValue(r)})},i=0;i<1;i++)r(i);return n},e.encode=L,e.filter=function(e){return function(t,n){var o=t.constructor;o._definition.addFilter(n,e)&&(o._context.useFilters=!0)}},e.filterChildren=function(e){return function(t,n){var o=t.constructor;o._definition.addChildrenFilter(n,e)&&(o._context.useFilters=!0)}},e.hasFilter=function(e){return e._context&&e._context.useFilters},e.registerType=y,e.type=b,Object.defineProperty(e,"__esModule",{value:!0})})},{}],2:[function(e,t,n){(function(e){(function(e,o){"object"==typeof n&&void 0!==t?o(n):"function"==typeof define&&define.amd?define("colyseus.js",["exports"],o):o((e="undefined"!=typeof globalThis?globalThis:e||self).Colyseus={})})(this,function(t){"use strict";ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return null!==e&&"object"==typeof e&&e.buffer instanceof ArrayBuffer}),"undefined"==typeof globalThis&&"undefined"!=typeof window&&(window.globalThis=window);var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}function r(e,t,n,o){return new(n||(n=Promise))(function(r,i){function s(e){try{c(o.next(e))}catch(t){i(t)}}function a(e){try{c(o.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((o=o.apply(e,t||[])).next())})}function i(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(e){return function(t){return c([e,t])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(a){i=[6,a],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}}function s(e,t){t.headers=e.headers||{},t.statusMessage=e.statusText,t.statusCode=e.status,t.data=e.response}function a(e,t,n){return new Promise(function(o,r){n=n||{};var i,a,c,u=new XMLHttpRequest,l=n.body,f=n.headers||{};for(i in n.timeout&&(u.timeout=n.timeout),u.ontimeout=u.onerror=function(e){e.timeout="timeout"==e.type,r(e)},u.open(e,t.href||t),u.onload=function(){for(c=u.getAllResponseHeaders().trim().split(/[\r\n]+/),s(u,u);a=c.shift();)a=a.split(": "),u.headers[a.shift().toLowerCase()]=a.join(": ");if((a=u.headers["content-type"])&&~a.indexOf("application/json"))try{u.data=JSON.parse(u.data,n.reviver)}catch(e){return s(u,e),r(e)}(u.status>=400?r:o)(u)},typeof FormData<"u"&&l instanceof FormData||l&&"object"==typeof l&&(f["content-type"]="application/json",l=JSON.stringify(l)),u.withCredentials=!!n.withCredentials,f)u.setRequestHeader(i,f[i]);u.send(l)})}var c=a.bind(a,"GET"),u=a.bind(a,"POST"),l=a.bind(a,"PATCH"),f=a.bind(a,"DELETE"),p=c,h=l,d=u,y=a.bind(a,"PUT"),v=a,g={del:f,get:p,patch:h,post:d,put:y,send:v},m=Object.freeze(Object.assign(Object.create(null),g,{default:g,del:f,get:p,patch:h,post:d,put:y,send:v})),_=function(e){function t(t,n){var o=e.call(this,n)||this;return o.name="ServerError",o.code=t,o}return o(t,e),t}(Error);function b(e,t){if(this._offset=t,e instanceof ArrayBuffer)this._buffer=e,this._view=new DataView(this._buffer);else{if(!ArrayBuffer.isView(e))throw new Error("Invalid argument");this._buffer=e.buffer,this._view=new DataView(this._buffer,e.byteOffset,e.byteLength)}}function A(e,t,n){for(var o="",r=0,i=t,s=t+n;i<s;i++){var a=e.getUint8(i);if(0!=(128&a))if(192!=(224&a))if(224!=(240&a)){if(240!=(248&a))throw new Error("Invalid byte "+a.toString(16));(r=(7&a)<<18|(63&e.getUint8(++i))<<12|(63&e.getUint8(++i))<<6|(63&e.getUint8(++i))<<0)>=65536?(r-=65536,o+=String.fromCharCode(55296+(r>>>10),56320+(1023&r))):o+=String.fromCharCode(r)}else o+=String.fromCharCode((15&a)<<12|(63&e.getUint8(++i))<<6|(63&e.getUint8(++i))<<0);else o+=String.fromCharCode((31&a)<<6|63&e.getUint8(++i));else o+=String.fromCharCode(a)}return o}function O(e,t){void 0===t&&(t=0);var n=new b(e,t),o=n._parse();if(n._offset!==e.byteLength)throw new Error(e.byteLength-n._offset+" trailing bytes");return o}function w(e,t,n){for(var o=0,r=0,i=n.length;r<i;r++)(o=n.charCodeAt(r))<128?e.setUint8(t++,o):o<2048?(e.setUint8(t++,192|o>>6),e.setUint8(t++,128|63&o)):o<55296||o>=57344?(e.setUint8(t++,224|o>>12),e.setUint8(t++,128|o>>6&63),e.setUint8(t++,128|63&o)):(r++,o=65536+((1023&o)<<10|1023&n.charCodeAt(r)),e.setUint8(t++,240|o>>18),e.setUint8(t++,128|o>>12&63),e.setUint8(t++,128|o>>6&63),e.setUint8(t++,128|63&o))}function I(e){for(var t=0,n=0,o=0,r=e.length;o<r;o++)(t=e.charCodeAt(o))<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(o++,n+=4);return n}function E(e,t,n){var o=typeof n,r=0,i=0,s=0,a=0,c=0,u=0;if("string"===o){if((c=I(n))<32)e.push(160|c),u=1;else if(c<256)e.push(217,c),u=2;else if(c<65536)e.push(218,c>>8,c),u=3;else{if(!(c<4294967296))throw new Error("String too long");e.push(219,c>>24,c>>16,c>>8,c),u=5}return t.push({_str:n,_length:c,_offset:e.length}),u+c}if("number"===o)return Math.floor(n)===n&&isFinite(n)?n>=0?n<128?(e.push(n),1):n<256?(e.push(204,n),2):n<65536?(e.push(205,n>>8,n),3):n<4294967296?(e.push(206,n>>24,n>>16,n>>8,n),5):(s=n/Math.pow(2,32)>>0,a=n>>>0,e.push(207,s>>24,s>>16,s>>8,s,a>>24,a>>16,a>>8,a),9):n>=-32?(e.push(n),1):n>=-128?(e.push(208,n),2):n>=-32768?(e.push(209,n>>8,n),3):n>=-2147483648?(e.push(210,n>>24,n>>16,n>>8,n),5):(s=Math.floor(n/Math.pow(2,32)),a=n>>>0,e.push(211,s>>24,s>>16,s>>8,s,a>>24,a>>16,a>>8,a),9):(e.push(203),t.push({_float:n,_length:8,_offset:e.length}),9);if("object"===o){if(null===n)return e.push(192),1;if(Array.isArray(n)){if((c=n.length)<16)e.push(144|c),u=1;else if(c<65536)e.push(220,c>>8,c),u=3;else{if(!(c<4294967296))throw new Error("Array too large");e.push(221,c>>24,c>>16,c>>8,c),u=5}for(r=0;r<c;r++)u+=E(e,t,n[r]);return u}if(n instanceof Date){var l=n.getTime();return s=Math.floor(l/Math.pow(2,32)),a=l>>>0,e.push(215,0,s>>24,s>>16,s>>8,s,a>>24,a>>16,a>>8,a),10}if(n instanceof ArrayBuffer){if((c=n.byteLength)<256)e.push(196,c),u=2;else if(c<65536)e.push(197,c>>8,c),u=3;else{if(!(c<4294967296))throw new Error("Buffer too large");e.push(198,c>>24,c>>16,c>>8,c),u=5}return t.push({_bin:n,_length:c,_offset:e.length}),u+c}if("function"==typeof n.toJSON)return E(e,t,n.toJSON());var f=[],p="",h=Object.keys(n);for(r=0,i=h.length;r<i;r++)"function"!=typeof n[p=h[r]]&&f.push(p);if((c=f.length)<16)e.push(128|c),u=1;else if(c<65536)e.push(222,c>>8,c),u=3;else{if(!(c<4294967296))throw new Error("Object too large");e.push(223,c>>24,c>>16,c>>8,c),u=5}for(r=0;r<c;r++)u+=E(e,t,p=f[r]),u+=E(e,t,n[p]);return u}if("boolean"===o)return e.push(n?195:194),1;if("undefined"===o)return e.push(212,0,0),3;throw new Error("Could not encode")}function P(e){var t=[],n=[],o=E(t,n,e),r=new ArrayBuffer(o),i=new DataView(r),s=0,a=0,c=-1;n.length>0&&(c=n[0]._offset);for(var u,l=0,f=0,p=0,h=t.length;p<h;p++)if(i.setUint8(a+p,t[p]),p+1===c){if(l=(u=n[s])._length,f=a+c,u._bin)for(var d=new Uint8Array(u._bin),y=0;y<l;y++)i.setUint8(f+y,d[y]);else u._str?w(i,f,u._str):void 0!==u._float&&i.setFloat64(f,u._float);a+=l,n[++s]&&(c=n[s]._offset)}return r}b.prototype._array=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=this._parse();return t},b.prototype._map=function(e){for(var t={},n=0;n<e;n++)t[this._parse()]=this._parse();return t},b.prototype._str=function(e){var t=A(this._view,this._offset,e);return this._offset+=e,t},b.prototype._bin=function(e){var t=this._buffer.slice(this._offset,this._offset+e);return this._offset+=e,t},b.prototype._parse=function(){var e,t=this._view.getUint8(this._offset++),n=0,o=0,r=0,i=0;if(t<192)return t<128?t:t<144?this._map(15&t):t<160?this._array(15&t):this._str(31&t);if(t>223)return-1*(255-t+1);switch(t){case 192:return null;case 194:return!1;case 195:return!0;case 196:return n=this._view.getUint8(this._offset),this._offset+=1,this._bin(n);case 197:return n=this._view.getUint16(this._offset),this._offset+=2,this._bin(n);case 198:return n=this._view.getUint32(this._offset),this._offset+=4,this._bin(n);case 199:return n=this._view.getUint8(this._offset),o=this._view.getInt8(this._offset+1),this._offset+=2,[o,this._bin(n)];case 200:return n=this._view.getUint16(this._offset),o=this._view.getInt8(this._offset+2),this._offset+=3,[o,this._bin(n)];case 201:return n=this._view.getUint32(this._offset),o=this._view.getInt8(this._offset+4),this._offset+=5,[o,this._bin(n)];case 202:return e=this._view.getFloat32(this._offset),this._offset+=4,e;case 203:return e=this._view.getFloat64(this._offset),this._offset+=8,e;case 204:return e=this._view.getUint8(this._offset),this._offset+=1,e;case 205:return e=this._view.getUint16(this._offset),this._offset+=2,e;case 206:return e=this._view.getUint32(this._offset),this._offset+=4,e;case 207:return r=this._view.getUint32(this._offset)*Math.pow(2,32),i=this._view.getUint32(this._offset+4),this._offset+=8,r+i;case 208:return e=this._view.getInt8(this._offset),this._offset+=1,e;case 209:return e=this._view.getInt16(this._offset),this._offset+=2,e;case 210:return e=this._view.getInt32(this._offset),this._offset+=4,e;case 211:return r=this._view.getInt32(this._offset)*Math.pow(2,32),i=this._view.getUint32(this._offset+4),this._offset+=8,r+i;case 212:return o=this._view.getInt8(this._offset),this._offset+=1,0===o?void(this._offset+=1):[o,this._bin(1)];case 213:return o=this._view.getInt8(this._offset),this._offset+=1,[o,this._bin(2)];case 214:return o=this._view.getInt8(this._offset),this._offset+=1,[o,this._bin(4)];case 215:return o=this._view.getInt8(this._offset),this._offset+=1,0===o?(r=this._view.getInt32(this._offset)*Math.pow(2,32),i=this._view.getUint32(this._offset+4),this._offset+=8,new Date(r+i)):[o,this._bin(8)];case 216:return o=this._view.getInt8(this._offset),this._offset+=1,[o,this._bin(16)];case 217:return n=this._view.getUint8(this._offset),this._offset+=1,this._str(n);case 218:return n=this._view.getUint16(this._offset),this._offset+=2,this._str(n);case 219:return n=this._view.getUint32(this._offset),this._offset+=4,this._str(n);case 220:return n=this._view.getUint16(this._offset),this._offset+=2,this._array(n);case 221:return n=this._view.getUint32(this._offset),this._offset+=4,this._array(n);case 222:return n=this._view.getUint16(this._offset),this._offset+=2,this._map(n);case 223:return n=this._view.getUint32(this._offset),this._offset+=4,this._map(n)}throw new Error("Could not parse")};var $,x,S=globalThis.WebSocket||function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")},R=function(){function e(e){this.events=e}return e.prototype.send=function(e){e instanceof ArrayBuffer?this.ws.send(e):Array.isArray(e)&&this.ws.send(new Uint8Array(e).buffer)},e.prototype.connect=function(e){this.ws=new S(e,this.protocols),this.ws.binaryType="arraybuffer",this.ws.onopen=this.events.onopen,this.ws.onmessage=this.events.onmessage,this.ws.onclose=this.events.onclose,this.ws.onerror=this.events.onerror},e.prototype.close=function(e,t){this.ws.close(e,t)},e}(),C=function(){function e(){this.events={},this.transport=new R(this.events)}return e.prototype.send=function(e){this.transport.send(e)},e.prototype.connect=function(e){this.transport.connect(e)},e.prototype.close=function(e,t){this.transport.close(e,t)},e}(),T={};function M(e,t){T[e]=t}function N(e){var t=T[e];if(!t)throw new Error("missing serializer: "+e);return t}function D(e,t){for(var n=e[t++],o="",r=0,i=t,s=t+n;i<s;i++){var a=e[i];if(0!=(128&a))if(192!=(224&a))if(224!=(240&a)){if(240!=(248&a))throw new Error("Invalid byte "+a.toString(16));(r=(7&a)<<18|(63&e[++i])<<12|(63&e[++i])<<6|(63&e[++i])<<0)>=65536?(r-=65536,o+=String.fromCharCode(55296+(r>>>10),56320+(1023&r))):o+=String.fromCharCode(r)}else o+=String.fromCharCode((15&a)<<12|(63&e[++i])<<6|(63&e[++i])<<0);else o+=String.fromCharCode((31&a)<<6|63&e[++i]);else o+=String.fromCharCode(a)}return o}function j(e){void 0===e&&(e="");for(var t=0,n=0,o=0,r=e.length;o<r;o++)(t=e.charCodeAt(o))<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(o++,n+=4);return n+1}t.Protocol=void 0,($=t.Protocol||(t.Protocol={}))[$.HANDSHAKE=9]="HANDSHAKE",$[$.JOIN_ROOM=10]="JOIN_ROOM",$[$.ERROR=11]="ERROR",$[$.LEAVE_ROOM=12]="LEAVE_ROOM",$[$.ROOM_DATA=13]="ROOM_DATA",$[$.ROOM_STATE=14]="ROOM_STATE",$[$.ROOM_STATE_PATCH=15]="ROOM_STATE_PATCH",$[$.ROOM_DATA_SCHEMA=16]="ROOM_DATA_SCHEMA",t.ErrorCode=void 0,(x=t.ErrorCode||(t.ErrorCode={}))[x.MATCHMAKE_NO_HANDLER=4210]="MATCHMAKE_NO_HANDLER",x[x.MATCHMAKE_INVALID_CRITERIA=4211]="MATCHMAKE_INVALID_CRITERIA",x[x.MATCHMAKE_INVALID_ROOM_ID=4212]="MATCHMAKE_INVALID_ROOM_ID",x[x.MATCHMAKE_UNHANDLED=4213]="MATCHMAKE_UNHANDLED",x[x.MATCHMAKE_EXPIRED=4214]="MATCHMAKE_EXPIRED",x[x.AUTH_FAILED=4215]="AUTH_FAILED",x[x.APPLICATION_ERROR=4216]="APPLICATION_ERROR";let U=()=>({events:{},emit(e,...t){(this.events[e]||[]).forEach(e=>e(...t))},on(e,t){return(this.events[e]=this.events[e]||[]).push(t),()=>this.events[e]=(this.events[e]||[]).filter(e=>e!==t)}});var L=function(){function e(){this.handlers=[]}return e.prototype.register=function(e){return this.handlers.push(e),this},e.prototype.invoke=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.handlers.forEach(function(n){return n.apply(e,t)})},e.prototype.invokeAsync=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Promise.all(this.handlers.map(function(n){return n.apply(e,t)}))},e.prototype.remove=function(e){var t=this.handlers.indexOf(e);this.handlers[t]=this.handlers[this.handlers.length-1],this.handlers.pop()},e.prototype.clear=function(){this.handlers=[]},e}();function F(){var e=new L;function t(t){return e.register(t,null===this)}return t.once=function(t){var n=function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];t.apply(this,o),e.remove(n)};e.register(n)},t.remove=function(t){return e.remove(t)},t.invoke=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.invoke.apply(e,t)},t.invokeAsync=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.invokeAsync.apply(e,t)},t.clear=function(){return e.clear()},t}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e||"undefined"!=typeof self&&self;var k,G=function(){var e={exports:{}};return function(e,t){!function(e){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,n)};function n(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}function o(e,t,n,o){var r,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s}function r(e,t){for(var n=0,o=t.length,r=e.length;n<o;n++,r++)e[r]=t[n];return e}var i,s=255;e.OPERATION=void 0,(i=e.OPERATION||(e.OPERATION={}))[i.ADD=128]="ADD",i[i.REPLACE=0]="REPLACE",i[i.DELETE=64]="DELETE",i[i.DELETE_AND_ADD=192]="DELETE_AND_ADD",i[i.TOUCH=1]="TOUCH",i[i.CLEAR=10]="CLEAR";var a=function(){function e(){this.refs=new Map,this.refCounts={},this.deletedRefs=new Set,this.nextUniqueId=0}return e.prototype.getNextUniqueId=function(){return this.nextUniqueId++},e.prototype.addRef=function(e,t,n){void 0===n&&(n=!0),this.refs.set(e,t),n&&(this.refCounts[e]=(this.refCounts[e]||0)+1)},e.prototype.removeRef=function(e){this.refCounts[e]=this.refCounts[e]-1,this.deletedRefs.add(e)},e.prototype.clearRefs=function(){this.refs.clear(),this.deletedRefs.clear(),this.refCounts={}},e.prototype.garbageCollectDeletedRefs=function(){var e=this;this.deletedRefs.forEach(function(t){if(e.refCounts[t]<=0){var n=e.refs.get(t);if(n instanceof pe)for(var o in n._definition.schema)"string"!=typeof n._definition.schema[o]&&n[o]&&n[o].$changes&&e.removeRef(n[o].$changes.refId);else{var r=n.$changes.parent._definition,i=r.schema[r.fieldsByIndex[n.$changes.parentIndex]];"function"==typeof Object.values(i)[0]&&Array.from(n.values()).forEach(function(t){return e.removeRef(t.$changes.refId)})}e.refs.delete(t),delete e.refCounts[t]}}),this.deletedRefs.clear()},e}(),c=function(){function t(e,t,n){this.changed=!1,this.changes=new Map,this.allChanges=new Set,this.caches={},this.currentCustomOperation=0,this.ref=e,this.setParent(t,n)}return t.prototype.setParent=function(e,t,n){var o=this;if(this.indexes||(this.indexes=this.ref instanceof pe?this.ref._definition.indexes:{}),this.parent=e,this.parentIndex=n,t)if(this.root=t,this.ref instanceof pe){var r=this.ref._definition;for(var i in r.schema){var s=this.ref[i];if(s&&s.$changes){var a=r.indexes[i];s.$changes.setParent(this.ref,t,a)}}}else"object"==typeof this.ref&&this.ref.forEach(function(e,t){if(e instanceof pe){var n=e.$changes,r=o.ref.$changes.indexes[t];n.setParent(o.ref,o.root,r)}})},t.prototype.operation=function(e){this.changes.set(--this.currentCustomOperation,e)},t.prototype.change=function(t,n){void 0===n&&(n=e.OPERATION.ADD);var o="number"==typeof t?t:this.indexes[t];this.assertValidIndex(o,t);var r=this.changes.get(o);r&&r.op!==e.OPERATION.DELETE&&r.op!==e.OPERATION.TOUCH||this.changes.set(o,{op:r&&r.op===e.OPERATION.DELETE?e.OPERATION.DELETE_AND_ADD:n,index:o}),this.allChanges.add(o),this.changed=!0,this.touchParents()},t.prototype.touch=function(t){var n="number"==typeof t?t:this.indexes[t];this.assertValidIndex(n,t),this.changes.has(n)||this.changes.set(n,{op:e.OPERATION.TOUCH,index:n}),this.allChanges.add(n),this.touchParents()},t.prototype.touchParents=function(){this.parent&&this.parent.$changes.touch(this.parentIndex)},t.prototype.getType=function(e){if(this.ref._definition)return(t=this.ref._definition).schema[t.fieldsByIndex[e]];var t,n=(t=this.parent._definition).schema[t.fieldsByIndex[this.parentIndex]];return Object.values(n)[0]},t.prototype.getChildrenFilter=function(){var e=this.parent._definition.childFilters;return e&&e[this.parentIndex]},t.prototype.getValue=function(e){return this.ref.getByIndex(e)},t.prototype.delete=function(t){var n="number"==typeof t?t:this.indexes[t];if(void 0!==n){var o=this.getValue(n);this.changes.set(n,{op:e.OPERATION.DELETE,index:n}),this.allChanges.delete(n),delete this.caches[n],o&&o.$changes&&(o.$changes.parent=void 0),this.changed=!0,this.touchParents()}else console.warn("@colyseus/schema "+this.ref.constructor.name+": trying to delete non-existing index: "+t+" ("+n+")")},t.prototype.discard=function(t,n){var o=this;void 0===t&&(t=!1),void 0===n&&(n=!1),this.ref instanceof pe||this.changes.forEach(function(t){if(t.op===e.OPERATION.DELETE){var n=o.ref.getIndex(t.index);delete o.indexes[n]}}),this.changes.clear(),this.changed=t,n&&this.allChanges.clear(),this.currentCustomOperation=0},t.prototype.discardAll=function(){var e=this;this.changes.forEach(function(t){var n=e.getValue(t.index);n&&n.$changes&&n.$changes.discardAll()}),this.discard()},t.prototype.cache=function(e,t){this.caches[e]=t},t.prototype.clone=function(){return new t(this.ref,this.parent,this.root)},t.prototype.ensureRefId=function(){void 0===this.refId&&(this.refId=this.root.getNextUniqueId())},t.prototype.assertValidIndex=function(e,t){if(void 0===e)throw new Error('ChangeTree: missing index for field "'+t+'"')},t}(),u=function(e,t){var n=e.toString(),o=t.toString();return n<o?-1:n>o?1:0};function l(e){return e.$proxy=!0,new Proxy(e,{get:function(e,t){return"symbol"==typeof t||isNaN(t)?e[t]:e.at(t)},set:function(e,t,n){if("symbol"==typeof t||isNaN(t))e[t]=n;else{var o=Array.from(e.$items.keys()),r=parseInt(o[t]||t);null==n?e.deleteAt(r):e.setAt(r,n)}return!0},deleteProperty:function(e,t){return"number"==typeof t?e.deleteAt(t):delete e[t],!0}})}var f=function(){function t(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.$changes=new c(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,this.push.apply(this,e)}return t.is=function(e){return Array.isArray(e)||void 0!==e.array},Object.defineProperty(t.prototype,"length",{get:function(){return this.$items.size},set:function(e){0===e?this.clear():this.splice(e,this.length-e)},enumerable:!1,configurable:!0}),t.prototype.push=function(){for(var e,t=this,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return n.forEach(function(n){e=t.$refId++,t.setAt(e,n)}),e},t.prototype.pop=function(){var e=Array.from(this.$indexes.values()).pop();if(void 0!==e){this.$changes.delete(e),this.$indexes.delete(e);var t=this.$items.get(e);return this.$items.delete(e),t}},t.prototype.at=function(e){var t=Array.from(this.$items.keys())[e];return this.$items.get(t)},t.prototype.setAt=function(t,n){var o,r;void 0!==n.$changes&&n.$changes.setParent(this,this.$changes.root,t);var i=null!==(r=null===(o=this.$changes.indexes[t])||void 0===o?void 0:o.op)&&void 0!==r?r:e.OPERATION.ADD;this.$changes.indexes[t]=t,this.$indexes.set(t,t),this.$items.set(t,n),this.$changes.change(t,i)},t.prototype.deleteAt=function(e){var t=Array.from(this.$items.keys())[e];return void 0!==t&&this.$deleteAt(t)},t.prototype.$deleteAt=function(e){return this.$changes.delete(e),this.$indexes.delete(e),this.$items.delete(e)},t.prototype.clear=function(t){var n=this;this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),t&&"string"!=typeof this.$changes.getType()&&this.$items.forEach(function(e){n.$changes.root.removeRef(e.$changes.refId)}),this.$items.clear(),this.$changes.operation({index:0,op:e.OPERATION.CLEAR}),this.$changes.touchParents()},t.prototype.concat=function(){for(var e,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return new(t.bind.apply(t,r([void 0],(e=Array.from(this.$items.values())).concat.apply(e,n))))},t.prototype.join=function(e){return Array.from(this.$items.values()).join(e)},t.prototype.reverse=function(){var e=this,t=Array.from(this.$items.keys());return Array.from(this.$items.values()).reverse().forEach(function(n,o){e.setAt(t[o],n)}),this},t.prototype.shift=function(){var e=Array.from(this.$items.keys()).shift();if(void 0!==e){var t=this.$items.get(e);return this.$deleteAt(e),t}},t.prototype.slice=function(e,n){return new(t.bind.apply(t,r([void 0],Array.from(this.$items.values()).slice(e,n))))},t.prototype.sort=function(e){var t=this;void 0===e&&(e=u);var n=Array.from(this.$items.keys());return Array.from(this.$items.values()).sort(e).forEach(function(e,o){t.setAt(n[o],e)}),this},t.prototype.splice=function(e,t){void 0===t&&(t=this.length-e);for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];for(var r=Array.from(this.$items.keys()),i=[],s=e;s<e+t;s++)i.push(this.$items.get(r[s])),this.$deleteAt(r[s]);return i},t.prototype.unshift=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=this.length,r=t.length,i=Array.from(this.$items.values());return t.forEach(function(t,n){e.setAt(n,t)}),i.forEach(function(t,n){e.setAt(r+n,t)}),o+r},t.prototype.indexOf=function(e,t){return Array.from(this.$items.values()).indexOf(e,t)},t.prototype.lastIndexOf=function(e,t){return void 0===t&&(t=this.length-1),Array.from(this.$items.values()).lastIndexOf(e,t)},t.prototype.every=function(e,t){return Array.from(this.$items.values()).every(e,t)},t.prototype.some=function(e,t){return Array.from(this.$items.values()).some(e,t)},t.prototype.forEach=function(e,t){Array.from(this.$items.values()).forEach(e,t)},t.prototype.map=function(e,t){return Array.from(this.$items.values()).map(e,t)},t.prototype.filter=function(e,t){return Array.from(this.$items.values()).filter(e,t)},t.prototype.reduce=function(e,t){return Array.from(this.$items.values()).reduce(e,t)},t.prototype.reduceRight=function(e,t){return Array.from(this.$items.values()).reduceRight(e,t)},t.prototype.find=function(e,t){return Array.from(this.$items.values()).find(e,t)},t.prototype.findIndex=function(e,t){return Array.from(this.$items.values()).findIndex(e,t)},t.prototype.fill=function(){throw new Error("ArraySchema#fill() not implemented")},t.prototype.copyWithin=function(){throw new Error("ArraySchema#copyWithin() not implemented")},t.prototype.toString=function(){return this.$items.toString()},t.prototype.toLocaleString=function(){return this.$items.toLocaleString()},t.prototype[Symbol.iterator]=function(){return Array.from(this.$items.values())[Symbol.iterator]()},t.prototype[Symbol.unscopables]=function(){return this.$items[Symbol.unscopables]()},t.prototype.entries=function(){return this.$items.entries()},t.prototype.keys=function(){return this.$items.keys()},t.prototype.values=function(){return this.$items.values()},t.prototype.includes=function(e,t){return Array.from(this.$items.values()).includes(e,t)},t.prototype.flatMap=function(){throw new Error("ArraySchema#flatMap() is not supported.")},t.prototype.flat=function(){throw new Error("ArraySchema#flat() is not supported.")},t.prototype.setIndex=function(e,t){this.$indexes.set(e,t)},t.prototype.getIndex=function(e){return this.$indexes.get(e)},t.prototype.getByIndex=function(e){return this.$items.get(this.$indexes.get(e))},t.prototype.deleteByIndex=function(e){var t=this.$indexes.get(e);this.$items.delete(t),this.$indexes.delete(e)},t.prototype.toArray=function(){return Array.from(this.$items.values())},t.prototype.toJSON=function(){return this.toArray().map(function(e){return"function"==typeof e.toJSON?e.toJSON():e})},t.prototype.clone=function(e){return e?new(t.bind.apply(t,r([void 0],Array.from(this.$items.values())))):new(t.bind.apply(t,r([void 0],this.map(function(e){return e.$changes?e.clone():e}))))},t.prototype.triggerAll=function(){pe.prototype.triggerAll.apply(this)},t}();function p(e){return e.$proxy=!0,new Proxy(e,{get:function(e,t){return"symbol"!=typeof t&&void 0===e[t]?e.get(t):e[t]},set:function(e,t,n){return"symbol"!=typeof t&&-1===t.indexOf("$")&&"onAdd"!==t&&"onRemove"!==t&&"onChange"!==t?e.set(t,n):e[t]=n,!0},deleteProperty:function(e,t){return e.delete(t),!0}})}var h=function(){function t(e){var t=this;if(this.$changes=new c(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,e)if(e instanceof Map)e.forEach(function(e,n){return t.set(n,e)});else for(var n in e)this.set(n,e[n])}return t.is=function(e){return void 0!==e.map},t.prototype[Symbol.iterator]=function(){return this.$items[Symbol.iterator]()},Object.defineProperty(t.prototype,Symbol.toStringTag,{get:function(){return this.$items[Symbol.toStringTag]},enumerable:!1,configurable:!0}),t.prototype.set=function(t,n){if(null==n)throw new Error("MapSchema#set('"+t+"', "+n+"): trying to set "+n+" value on '"+t+"'.");var o=void 0!==this.$changes.indexes[t],r=o?this.$changes.indexes[t]:this.$refId++,i=o?e.OPERATION.REPLACE:e.OPERATION.ADD,s=void 0!==n.$changes;return s&&n.$changes.setParent(this,this.$changes.root,r),o?s&&this.$items.get(t)!==n&&(i=e.OPERATION.ADD):(this.$changes.indexes[t]=r,this.$indexes.set(r,t)),this.$items.set(t,n),this.$changes.change(t,i),this},t.prototype.get=function(e){return this.$items.get(e)},t.prototype.delete=function(e){return this.$changes.delete(e),this.$items.delete(e)},t.prototype.clear=function(t){var n=this;this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),t&&"string"!=typeof this.$changes.getType()&&this.$items.forEach(function(e){n.$changes.root.removeRef(e.$changes.refId)}),this.$items.clear(),this.$changes.operation({index:0,op:e.OPERATION.CLEAR}),this.$changes.touchParents()},t.prototype.has=function(e){return this.$items.has(e)},t.prototype.forEach=function(e){this.$items.forEach(e)},t.prototype.entries=function(){return this.$items.entries()},t.prototype.keys=function(){return this.$items.keys()},t.prototype.values=function(){return this.$items.values()},Object.defineProperty(t.prototype,"size",{get:function(){return this.$items.size},enumerable:!1,configurable:!0}),t.prototype.setIndex=function(e,t){this.$indexes.set(e,t)},t.prototype.getIndex=function(e){return this.$indexes.get(e)},t.prototype.getByIndex=function(e){return this.$items.get(this.$indexes.get(e))},t.prototype.deleteByIndex=function(e){var t=this.$indexes.get(e);this.$items.delete(t),this.$indexes.delete(e)},t.prototype.toJSON=function(){var e={};return this.forEach(function(t,n){e[n]="function"==typeof t.toJSON?t.toJSON():t}),e},t.prototype.clone=function(e){var n;return e?n=Object.assign(new t,this):(n=new t,this.forEach(function(e,t){e.$changes?n.set(t,e.clone()):n.set(t,e)})),n},t.prototype.triggerAll=function(){pe.prototype.triggerAll.apply(this)},t}(),d={};function y(e,t){d[e]=t}function v(e){return d[e]}var g=function(){function e(){this.indexes={},this.fieldsByIndex={},this.deprecated={},this.descriptors={}}return e.create=function(t){var n=new e;return n.schema=Object.assign({},t&&t.schema||{}),n.indexes=Object.assign({},t&&t.indexes||{}),n.fieldsByIndex=Object.assign({},t&&t.fieldsByIndex||{}),n.descriptors=Object.assign({},t&&t.descriptors||{}),n.deprecated=Object.assign({},t&&t.deprecated||{}),n},e.prototype.addField=function(e,t){var n=this.getNextFieldIndex();this.fieldsByIndex[n]=e,this.indexes[e]=n,this.schema[e]=Array.isArray(t)?{array:t[0]}:t},e.prototype.addFilter=function(e,t){return this.filters||(this.filters={},this.indexesWithFilters=[]),this.filters[this.indexes[e]]=t,this.indexesWithFilters.push(this.indexes[e]),!0},e.prototype.addChildrenFilter=function(e,t){var n=this.indexes[e],o=this.schema[e];if(v(Object.keys(o)[0]))return this.childFilters||(this.childFilters={}),this.childFilters[n]=t,!0;console.warn("@filterChildren: field '"+e+"' can't have children. Ignoring filter.")},e.prototype.getChildrenFilter=function(e){return this.childFilters&&this.childFilters[this.indexes[e]]},e.prototype.getNextFieldIndex=function(){return Object.keys(this.schema||{}).length},e}(),m=function(){function e(){this.types={},this.schemas=new Map,this.useFilters=!1}return e.prototype.has=function(e){return this.schemas.has(e)},e.prototype.get=function(e){return this.types[e]},e.prototype.add=function(e,t){void 0===t&&(t=this.schemas.size),e._definition=g.create(e._definition),e._typeid=t,this.types[t]=e,this.schemas.set(e,t)},e.create=function(t){return void 0===t&&(t=new e),function(e){return b(e,t)}},e}(),_=new m;function b(e,t){return void 0===t&&(t=_),function(n,o){var i=n.constructor;i._context=t,t.has(i)||t.add(i);var s=i._definition;if(s.addField(o,e),s.descriptors[o]){if(s.deprecated[o])return;try{throw new Error("@colyseus/schema: Duplicate '"+o+"' definition on '"+i.name+"'.\nCheck @type() annotation")}catch(v){var a=v.stack.split("\n")[4].trim();throw new Error(v.message+" "+a)}}var c=f.is(e),u=!c&&h.is(e);if("string"!=typeof e&&!pe.is(e)){var d=Object.values(e)[0];"string"==typeof d||t.has(d)||t.add(d)}var y="_"+o;s.descriptors[y]={enumerable:!1,configurable:!1,writable:!0},s.descriptors[o]={get:function(){return this[y]},set:function(e){e!==this[y]&&(null!=e?(!c||e instanceof f||(e=new(f.bind.apply(f,r([void 0],e)))),!u||e instanceof h||(e=new h(e)),void 0===e.$proxy&&(u?e=p(e):c&&(e=l(e))),this.$changes.change(o),e.$changes&&e.$changes.setParent(this,this.$changes.root,this._definition.indexes[o])):this.$changes.delete(o),this[y]=e)},enumerable:!0,configurable:!0}}}function A(e){for(var t=0,n=0,o=0,r=e.length;o<r;o++)(t=e.charCodeAt(o))<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(o++,n+=4);return n}function O(e,t,n){for(var o=0,r=0,i=n.length;r<i;r++)(o=n.charCodeAt(r))<128?e[t++]=o:o<2048?(e[t++]=192|o>>6,e[t++]=128|63&o):o<55296||o>=57344?(e[t++]=224|o>>12,e[t++]=128|o>>6&63,e[t++]=128|63&o):(r++,o=65536+((1023&o)<<10|1023&n.charCodeAt(r)),e[t++]=240|o>>18,e[t++]=128|o>>12&63,e[t++]=128|o>>6&63,e[t++]=128|63&o)}function w(e,t){e.push(255&t)}function I(e,t){e.push(255&t)}function E(e,t){e.push(255&t),e.push(t>>8&255)}function P(e,t){e.push(255&t),e.push(t>>8&255)}function $(e,t){e.push(255&t),e.push(t>>8&255),e.push(t>>16&255),e.push(t>>24&255)}function x(e,t){var n=t>>24,o=t>>16,r=t>>8,i=t;e.push(255&i),e.push(255&r),e.push(255&o),e.push(255&n)}function S(e,t){var n=Math.floor(t/Math.pow(2,32));x(e,t>>>0),x(e,n)}function R(e,t){var n=t/Math.pow(2,32)>>0;x(e,t>>>0),x(e,n)}var C=new Int32Array(2),T=new Float32Array(C.buffer),M=new Float64Array(C.buffer);function N(e,t){T[0]=t,$(e,C[0])}function D(e,t){M[0]=t,$(e,C[0]),$(e,C[1])}function j(e,t){t||(t="");var n=A(t),o=0;if(n<32)e.push(160|n),o=1;else if(n<256)e.push(217),I(e,n),o=2;else if(n<65536)e.push(218),P(e,n),o=3;else{if(!(n<4294967296))throw new Error("String too long");e.push(219),x(e,n),o=5}return O(e,e.length,t),o+n}function U(e,t){return isNaN(t)?U(e,0):isFinite(t)?t!==(0|t)?(e.push(203),D(e,t),9):t>=0?t<128?(I(e,t),1):t<256?(e.push(204),I(e,t),2):t<65536?(e.push(205),P(e,t),3):t<4294967296?(e.push(206),x(e,t),5):(e.push(207),R(e,t),9):t>=-32?(e.push(224|t+32),1):t>=-128?(e.push(208),w(e,t),2):t>=-32768?(e.push(209),E(e,t),3):t>=-2147483648?(e.push(210),$(e,t),5):(e.push(211),S(e,t),9):U(e,t>0?Number.MAX_SAFE_INTEGER:-Number.MAX_SAFE_INTEGER)}var L=Object.freeze({__proto__:null,utf8Write:O,int8:w,uint8:I,int16:E,uint16:P,int32:$,uint32:x,int64:S,uint64:R,float32:function(e,t){N(e,t)},float64:function(e,t){D(e,t)},writeFloat32:N,writeFloat64:D,boolean:function(e,t){return I(e,t?1:0)},string:j,number:U});function F(e,t,n){for(var o="",r=0,i=t,s=t+n;i<s;i++){var a=e[i];0!=(128&a)?192!=(224&a)?224!=(240&a)?240!=(248&a)?console.error("Invalid byte "+a.toString(16)):(r=(7&a)<<18|(63&e[++i])<<12|(63&e[++i])<<6|(63&e[++i])<<0)>=65536?(r-=65536,o+=String.fromCharCode(55296+(r>>>10),56320+(1023&r))):o+=String.fromCharCode(r):o+=String.fromCharCode((15&a)<<12|(63&e[++i])<<6|(63&e[++i])<<0):o+=String.fromCharCode((31&a)<<6|63&e[++i]):o+=String.fromCharCode(a)}return o}function k(e,t){return G(e,t)<<24>>24}function G(e,t){return e[t.offset++]}function B(e,t){return V(e,t)<<16>>16}function V(e,t){return e[t.offset++]|e[t.offset++]<<8}function H(e,t){return e[t.offset++]|e[t.offset++]<<8|e[t.offset++]<<16|e[t.offset++]<<24}function J(e,t){return H(e,t)>>>0}function q(e,t){var n=J(e,t);return H(e,t)*Math.pow(2,32)+n}function z(e,t){var n=J(e,t);return J(e,t)*Math.pow(2,32)+n}var W=new Int32Array(2),K=new Float32Array(W.buffer),X=new Float64Array(W.buffer);function Y(e,t){return W[0]=H(e,t),K[0]}function Q(e,t){return W[0]=H(e,t),W[1]=H(e,t),X[0]}function Z(e,t){var n,o=e[t.offset++];o<192?n=31&o:217===o?n=G(e,t):218===o?n=V(e,t):219===o&&(n=J(e,t));var r=F(e,t.offset,n);return t.offset+=n,r}function ee(e,t){var n=e[t.offset++];return n<128?n:202===n?Y(e,t):203===n?Q(e,t):204===n?G(e,t):205===n?V(e,t):206===n?J(e,t):207===n?z(e,t):208===n?k(e,t):209===n?B(e,t):210===n?H(e,t):211===n?q(e,t):n>223?-1*(255-n+1):void 0}function te(e,t){return e[t.offset-1]===s&&(e[t.offset]<128||e[t.offset]>=202&&e[t.offset]<=211)}var ne=Object.freeze({__proto__:null,int8:k,uint8:G,int16:B,uint16:V,int32:H,uint32:J,float32:function(e,t){return Y(e,t)},float64:function(e,t){return Q(e,t)},int64:q,uint64:z,readFloat32:Y,readFloat64:Q,boolean:function(e,t){return G(e,t)>0},string:Z,stringCheck:function(e,t){var n=e[t.offset];return n<192&&n>160||217===n||218===n||219===n},number:ee,numberCheck:function(e,t){var n=e[t.offset];return n<128||n>=202&&n<=211},arrayCheck:function(e,t){return e[t.offset]<160},switchStructureCheck:te}),oe=function(){function t(e){var t=this;this.$changes=new c(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,e&&e.forEach(function(e){return t.add(e)})}return t.is=function(e){return void 0!==e.collection},t.prototype.add=function(e){var t=this.$refId++;return void 0!==e.$changes&&e.$changes.setParent(this,this.$changes.root,t),this.$changes.indexes[t]=t,this.$indexes.set(t,t),this.$items.set(t,e),this.$changes.change(t),t},t.prototype.at=function(e){var t=Array.from(this.$items.keys())[e];return this.$items.get(t)},t.prototype.entries=function(){return this.$items.entries()},t.prototype.delete=function(e){for(var t,n,o=this.$items.entries();(n=o.next())&&!n.done;)if(e===n.value[1]){t=n.value[0];break}return void 0!==t&&(this.$changes.delete(t),this.$indexes.delete(t),this.$items.delete(t))},t.prototype.clear=function(t){var n=this;this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),t&&"string"!=typeof this.$changes.getType()&&this.$items.forEach(function(e){n.$changes.root.removeRef(e.$changes.refId)}),this.$items.clear(),this.$changes.operation({index:0,op:e.OPERATION.CLEAR}),this.$changes.touchParents()},t.prototype.has=function(e){return Array.from(this.$items.values()).some(function(t){return t===e})},t.prototype.forEach=function(e){var t=this;this.$items.forEach(function(n,o){return e(n,o,t)})},t.prototype.values=function(){return this.$items.values()},Object.defineProperty(t.prototype,"size",{get:function(){return this.$items.size},enumerable:!1,configurable:!0}),t.prototype.setIndex=function(e,t){this.$indexes.set(e,t)},t.prototype.getIndex=function(e){return this.$indexes.get(e)},t.prototype.getByIndex=function(e){return this.$items.get(this.$indexes.get(e))},t.prototype.deleteByIndex=function(e){var t=this.$indexes.get(e);this.$items.delete(t),this.$indexes.delete(e)},t.prototype.toArray=function(){return Array.from(this.$items.values())},t.prototype.toJSON=function(){var e=[];return this.forEach(function(t){e.push("function"==typeof t.toJSON?t.toJSON():t)}),e},t.prototype.clone=function(e){var n;return e?n=Object.assign(new t,this):(n=new t,this.forEach(function(e){e.$changes?n.add(e.clone()):n.add(e)})),n},t.prototype.triggerAll=function(){pe.prototype.triggerAll.apply(this)},t}(),re=function(){function t(e){var t=this;this.$changes=new c(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,e&&e.forEach(function(e){return t.add(e)})}return t.is=function(e){return void 0!==e.set},t.prototype.add=function(t){var n,o;if(this.has(t))return!1;var r=this.$refId++;void 0!==t.$changes&&t.$changes.setParent(this,this.$changes.root,r);var i=null!==(o=null===(n=this.$changes.indexes[r])||void 0===n?void 0:n.op)&&void 0!==o?o:e.OPERATION.ADD;return this.$changes.indexes[r]=r,this.$indexes.set(r,r),this.$items.set(r,t),this.$changes.change(r,i),r},t.prototype.entries=function(){return this.$items.entries()},t.prototype.delete=function(e){for(var t,n,o=this.$items.entries();(n=o.next())&&!n.done;)if(e===n.value[1]){t=n.value[0];break}return void 0!==t&&(this.$changes.delete(t),this.$indexes.delete(t),this.$items.delete(t))},t.prototype.clear=function(t){var n=this;this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),t&&"string"!=typeof this.$changes.getType()&&this.$items.forEach(function(e){n.$changes.root.removeRef(e.$changes.refId)}),this.$items.clear(),this.$changes.operation({index:0,op:e.OPERATION.CLEAR}),this.$changes.touchParents()},t.prototype.has=function(e){for(var t,n=this.$items.values(),o=!1;(t=n.next())&&!t.done;)if(e===t.value){o=!0;break}return o},t.prototype.forEach=function(e){var t=this;this.$items.forEach(function(n,o){return e(n,o,t)})},t.prototype.values=function(){return this.$items.values()},Object.defineProperty(t.prototype,"size",{get:function(){return this.$items.size},enumerable:!1,configurable:!0}),t.prototype.setIndex=function(e,t){this.$indexes.set(e,t)},t.prototype.getIndex=function(e){return this.$indexes.get(e)},t.prototype.getByIndex=function(e){return this.$items.get(this.$indexes.get(e))},t.prototype.deleteByIndex=function(e){var t=this.$indexes.get(e);this.$items.delete(t),this.$indexes.delete(e)},t.prototype.toArray=function(){return Array.from(this.$items.values())},t.prototype.toJSON=function(){var e=[];return this.forEach(function(t){e.push("function"==typeof t.toJSON?t.toJSON():t)}),e},t.prototype.clone=function(e){var n;return e?n=Object.assign(new t,this):(n=new t,this.forEach(function(e){e.$changes?n.add(e.clone()):n.add(e)})),n},t.prototype.triggerAll=function(){pe.prototype.triggerAll.apply(this)},t}(),ie=function(){function e(){this.handlers=[]}return e.prototype.register=function(e){return this.handlers.push(e),this},e.prototype.invoke=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.handlers.forEach(function(t){return t.apply(void 0,e)})},e.prototype.invokeAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Promise.all(this.handlers.map(function(t){return t.apply(void 0,e)}))},e.prototype.remove=function(e){var t=this.handlers.indexOf(e);this.handlers[t]=this.handlers[this.handlers.length-1],this.handlers.pop()},e.prototype.clear=function(){this.handlers=[]},e}(),se=function(){function e(){this.refIds=new WeakSet,this.containerIndexes=new WeakMap}return e.prototype.addRefId=function(e){this.refIds.has(e)||(this.refIds.add(e),this.containerIndexes.set(e,new Set))},e.get=function(t){return void 0===t.$filterState&&(t.$filterState=new e),t.$filterState},e}(),ae=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(Error);function ce(e,t,n,o){var r,i=!1;switch(t){case"number":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":case"int64":case"uint64":case"float32":case"float64":r="number",isNaN(e)&&console.log('trying to encode "NaN" in '+n.constructor.name+"#"+o);break;case"string":r="string",i=!0;break;case"boolean":return}if(typeof e!==r&&(!i||i&&null!==e)){var s="'"+JSON.stringify(e)+"'"+(e&&e.constructor&&" ("+e.constructor.name+")"||"");throw new ae("a '"+r+"' was expected, but "+s+" was provided in "+n.constructor.name+"#"+o)}}function ue(e,t,n,o){if(!(e instanceof t))throw new ae("a '"+t.name+"' was expected, but '"+e.constructor.name+"' was provided in "+n.constructor.name+"#"+o)}function le(e,t,n,o,r){ce(n,e,o,r);var i=L[e];if(!i)throw new ae("a '"+e+"' was expected, but "+n+" was provided in "+o.constructor.name+"#"+r);i(t,n)}function fe(e,t,n){return ne[e](t,n)}var pe=function(){function t(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Object.defineProperties(this,{$changes:{value:new c(this,void 0,new a),enumerable:!1,writable:!0},$listeners:{value:{},enumerable:!1,writable:!0}});var n=this._definition.descriptors;n&&Object.defineProperties(this,n),e[0]&&this.assign(e[0])}return t.onError=function(e){console.error(e)},t.is=function(e){return e._definition&&void 0!==e._definition.schema},t.prototype.assign=function(e){return Object.assign(this,e),this},Object.defineProperty(t.prototype,"_definition",{get:function(){return this.constructor._definition},enumerable:!1,configurable:!0}),t.prototype.listen=function(e,t){var n=this;return this.$listeners[e]||(this.$listeners[e]=new ie),this.$listeners[e].register(t),function(){return n.$listeners[e].remove(t)}},t.prototype.decode=function(n,o,r,i){void 0===o&&(o={offset:0}),void 0===r&&(r=this),void 0===i&&(i=new Map);var a=this.$changes.root,c=n.length,u=0,l=[];for(a.refs.set(u,this),i.set(u,l);o.offset<c;){var p=n[o.offset++];if(p!=s){var d=r.$changes,y=void 0!==r._definition,g=y?p>>6<<6:p;if(g!==e.OPERATION.CLEAR){var m=y?p%(g||255):ee(n,o),_=y?r._definition.fieldsByIndex[m]:"",b=d.getType(m),A=void 0,O=void 0,w=void 0;if(y?O=r["_"+_]:(O=r.getByIndex(m),(g&e.OPERATION.ADD)===e.OPERATION.ADD?(w=r instanceof h?Z(n,o):m,r.setIndex(m,w)):w=r.getIndex(m)),(g&e.OPERATION.DELETE)===e.OPERATION.DELETE&&(g!==e.OPERATION.DELETE_AND_ADD&&r.deleteByIndex(m),O&&O.$changes&&a.removeRef(O.$changes.refId),A=null),void 0!==_){if(g===e.OPERATION.DELETE);else if(t.is(b)){var I=ee(n,o);if(A=a.refs.get(I),g!==e.OPERATION.REPLACE){var E=this.getSchemaType(n,o,b);A||((A=this.createTypeInstance(E)).$changes.refId=I,O&&(A.onChange=O.onChange,A.onRemove=O.onRemove,A.$listeners=O.$listeners,O.$changes.refId&&I!==O.$changes.refId&&a.removeRef(O.$changes.refId))),a.addRef(I,A,A!==O)}}else if("string"==typeof b)A=fe(b,n,o);else{var P=v(Object.keys(b)[0]),$=ee(n,o),x=a.refs.has($)?O||a.refs.get($):new P.constructor;if((A=x.clone(!0)).$changes.refId=$,O&&(A.onAdd=O.onAdd,A.onRemove=O.onRemove,A.onChange=O.onChange,O.$changes.refId&&$!==O.$changes.refId)){a.removeRef(O.$changes.refId);for(var S=[],R=O.entries(),C=void 0;(C=R.next())&&!C.done;){var T=C.value,M=T[0],N=T[1];S.push({op:e.OPERATION.DELETE,field:M,value:void 0,previousValue:N})}i.set(O.$changes.refId,S)}a.addRef($,A,x!==O),P.getProxy&&(A=P.getProxy(A))}var D=O!==A;if(null!=A)if(A.$changes&&A.$changes.setParent(d.ref,d.root,m),r instanceof t)r[_]=A;else if(r instanceof h)M=w,r.$items.set(M,A);else if(r instanceof f)r.setAt(m,A);else if(r instanceof oe){var j=r.add(A);r.setIndex(m,j)}else r instanceof re&&!1!==(j=r.add(A))&&r.setIndex(m,j);D&&l.push({op:g,field:_,dynamicIndex:w,value:A,previousValue:O})}else{console.warn("@colyseus/schema: definition mismatch");for(var U={offset:o.offset};o.offset<c&&(!te(n,o)||(U.offset=o.offset+1,!a.refs.has(ee(n,U))));)o.offset++}}else r.clear(!0)}else{u=ee(n,o);var L=a.refs.get(u);if(!L)throw new Error('"refId" not found: '+u);r=L,l=[],i.set(u,l)}}return this._triggerChanges(i),a.garbageCollectDeletedRefs(),i},t.prototype.encode=function(n,o,r){void 0===n&&(n=!1),void 0===o&&(o=[]),void 0===r&&(r=!1);for(var i=this.$changes,a=new WeakSet,c=[i],u=1,l=0;l<u;l++){var f=c[l],p=f.ref,d=p instanceof t;f.ensureRefId(),a.add(f),f!==i&&(f.changed||n)&&(I(o,s),U(o,f.refId));for(var y=n?Array.from(f.allChanges):Array.from(f.changes.values()),g=0,m=y.length;g<m;g++){var _=n?{op:e.OPERATION.ADD,index:y[g]}:y[g],b=_.index,A=d?p._definition.fieldsByIndex&&p._definition.fieldsByIndex[b]:b,O=o.length;if(_.op!==e.OPERATION.TOUCH)if(d)I(o,b|_.op);else{if(I(o,_.op),_.op===e.OPERATION.CLEAR)continue;U(o,b)}if(d||(_.op&e.OPERATION.ADD)!=e.OPERATION.ADD||p instanceof h&&j(o,f.ref.$indexes.get(b)),_.op!==e.OPERATION.DELETE){var w=f.getType(b),E=f.getValue(b);if(E&&E.$changes&&!a.has(E.$changes)&&(c.push(E.$changes),E.$changes.ensureRefId(),u++),_.op!==e.OPERATION.TOUCH){if(t.is(w))ue(E,w,p,A),U(o,E.$changes.refId),(_.op&e.OPERATION.ADD)===e.OPERATION.ADD&&this.tryEncodeTypeId(o,w,E.constructor);else if("string"==typeof w)le(w,o,E,p,A);else{var P=v(Object.keys(w)[0]);ue(p["_"+A],P.constructor,p,A),U(o,E.$changes.refId)}r&&f.cache(b,o.slice(O))}}}n||r||f.discard()}return o},t.prototype.encodeAll=function(e){return this.encode(!0,[],e)},t.prototype.applyFilters=function(n,o){var r,i;void 0===o&&(o=!1);for(var a=this,c=new Set,u=se.get(n),l=[this.$changes],f=1,p=[],d=function(d){var y=l[d];if(c.has(y.refId))return"continue";var v=y.ref,g=v instanceof t;I(p,s),U(p,y.refId);var m=u.refIds.has(y),_=o||!m;u.addRefId(y);var b=u.containerIndexes.get(y),A=_?Array.from(y.allChanges):Array.from(y.changes.values());!o&&g&&v._definition.indexesWithFilters&&v._definition.indexesWithFilters.forEach(function(t){!b.has(t)&&y.allChanges.has(t)&&(_?A.push(t):A.push({op:e.OPERATION.ADD,index:t}))});for(var O=0,w=A.length;O<w;O++){var E=_?{op:e.OPERATION.ADD,index:A[O]}:A[O];if(E.op!==e.OPERATION.CLEAR){var P=E.index;if(E.op!==e.OPERATION.DELETE){var $=y.getValue(P),x=y.getType(P);if(g){if((S=v._definition.filters&&v._definition.filters[P])&&!S.call(v,n,$,a)){$&&$.$changes&&c.add($.$changes.refId);continue}}else{var S,R=y.parent;if((S=y.getChildrenFilter())&&!S.call(R,n,v.$indexes.get(P),$,a)){$&&$.$changes&&c.add($.$changes.refId);continue}}if($.$changes&&(l.push($.$changes),f++),E.op!==e.OPERATION.TOUCH)if(E.op===e.OPERATION.ADD||g)p.push.apply(p,null!==(r=y.caches[P])&&void 0!==r?r:[]),b.add(P);else if(b.has(P))p.push.apply(p,null!==(i=y.caches[P])&&void 0!==i?i:[]);else{if(b.add(P),I(p,e.OPERATION.ADD),U(p,P),v instanceof h){var C=y.ref.$indexes.get(P);j(p,C)}$.$changes?U(p,$.$changes.refId):L[x](p,$)}else $.$changes&&!g&&(I(p,e.OPERATION.ADD),U(p,P),v instanceof h&&(C=y.ref.$indexes.get(P),j(p,C)),U(p,$.$changes.refId))}else g?I(p,E.op|P):(I(p,E.op),U(p,P))}else I(p,E.op)}},y=0;y<f;y++)d(y);return p},t.prototype.clone=function(){var e=new this.constructor,t=this._definition.schema;for(var n in t)"object"==typeof this[n]&&"function"==typeof this[n].clone?e[n]=this[n].clone():e[n]=this[n];return e},t.prototype.triggerAll=function(){if(0!==this.$changes.root.refs.size){var e=new Map;t.prototype._triggerAllFillChanges.call(this,this,e);try{t.prototype._triggerChanges.call(this,e)}catch(n){t.onError(n)}}},t.prototype.toJSON=function(){var e=this._definition.schema,t=this._definition.deprecated,n={};for(var o in e)t[o]||null===this[o]||void 0===this[o]||(n[o]="function"==typeof this[o].toJSON?this[o].toJSON():this["_"+o]);return n},t.prototype.discardAllChanges=function(){this.$changes.discardAll()},t.prototype.getByIndex=function(e){return this[this._definition.fieldsByIndex[e]]},t.prototype.deleteByIndex=function(e){this[this._definition.fieldsByIndex[e]]=void 0},t.prototype.tryEncodeTypeId=function(e,t,n){t._typeid!==n._typeid&&(I(e,213),U(e,n._typeid))},t.prototype.getSchemaType=function(e,t,n){var o;return 213===e[t.offset]&&(t.offset++,o=this.constructor._context.get(ee(e,t))),o||n},t.prototype.createTypeInstance=function(e){var t=new e;return t.$changes.root=this.$changes.root,t},t.prototype._triggerAllFillChanges=function(n,o){if(!o.has(n.$changes.refId)){var r=[];if(o.set(n.$changes.refId||0,r),n instanceof t){var i=n._definition.schema;for(var s in i)void 0!==(f=n["_"+s])&&(r.push({op:e.OPERATION.ADD,field:s,value:f,previousValue:void 0}),void 0!==f.$changes&&t.prototype._triggerAllFillChanges.call(this,f,o))}else for(var a=n.entries(),c=void 0;(c=a.next())&&!c.done;){var u=c.value,l=u[0],f=u[1];r.push({op:e.OPERATION.ADD,field:l,dynamicIndex:l,value:f,previousValue:void 0}),void 0!==f.$changes&&t.prototype._triggerAllFillChanges.call(this,f,o)}}},t.prototype._triggerChanges=function(n){var o=this;n.forEach(function(n,r){var i,s,a,c,u,l,f,p,h,d,y,v;if(n.length>0){for(var g=o.$changes.root.refs.get(r),m=g instanceof t,_=0;_<n.length;_++){var b=n[_],A=g.$listeners&&g.$listeners[b.field];if(m||(b.op===e.OPERATION.ADD&&void 0===b.previousValue?null===(s=(i=g).onAdd)||void 0===s||s.call(i,b.value,null!==(a=b.dynamicIndex)&&void 0!==a?a:b.field):b.op===e.OPERATION.DELETE?void 0!==b.previousValue&&(null===(u=(c=g).onRemove)||void 0===u||u.call(c,b.previousValue,null!==(l=b.dynamicIndex)&&void 0!==l?l:b.field)):b.op===e.OPERATION.DELETE_AND_ADD?(void 0!==b.previousValue&&(null===(p=(f=g).onRemove)||void 0===p||p.call(f,b.previousValue,b.dynamicIndex)),null===(d=(h=g).onAdd)||void 0===d||d.call(h,b.value,b.dynamicIndex)):b.op!==e.OPERATION.REPLACE&&b.value===b.previousValue||null===(v=(y=g).onChange)||void 0===v||v.call(y,b.value,b.dynamicIndex)),(b.op&e.OPERATION.DELETE)===e.OPERATION.DELETE&&b.previousValue instanceof t&&b.previousValue.onRemove&&b.previousValue.onRemove(),A)try{A.invoke(b.value,b.previousValue)}catch(O){t.onError(O)}}if(m&&g.onChange)try{g.onChange(n)}catch(O){t.onError(O)}}})},t._definition=g.create(),t}(),he=new m,de=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),o([b("string",he)],t.prototype,"name",void 0),o([b("string",he)],t.prototype,"type",void 0),o([b("number",he)],t.prototype,"referencedType",void 0),t}(pe),ye=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fields=new f,t}return n(t,e),o([b("number",he)],t.prototype,"id",void 0),o([b([de],he)],t.prototype,"fields",void 0),t}(pe),ve=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.types=new f,t}return n(t,e),t.encode=function(e){var n=e.constructor,o=new t;o.rootType=n._typeid;var r=function(e,t){for(var n in t){var r=new de;r.name=n;var i=void 0;if("string"==typeof t[n])i=t[n];else{var s=t[n],a=void 0;pe.is(s)?(i="ref",a=t[n]):"string"==typeof s[i=Object.keys(s)[0]]?i+=":"+s[i]:a=s[i],r.referencedType=a?a._typeid:-1}r.type=i,e.fields.push(r)}o.types.push(e)},i=n._context.types;for(var s in i){var a=new ye;a.id=Number(s),r(a,i[s]._definition.schema)}return o.encodeAll()},t.decode=function(e,o){var r=new m,i=new t;i.decode(e,o);var s=i.types.reduce(function(e,t){var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(pe),i=t.id;return e[i]=o,r.add(o,i),e},{});i.types.forEach(function(e){var t=s[e.id];e.fields.forEach(function(e){var n;if(void 0!==e.referencedType){var o=e.type,i=s[e.referencedType];if(!i){var a=e.type.split(":");o=a[0],i=a[1]}"ref"===o?b(i,r)(t.prototype,e.name):b(((n={})[o]=i,n),r)(t.prototype,e.name)}else b(e.type,r)(t.prototype,e.name)})});var a=s[i.rootType],c=new a;for(var u in a._definition.schema){var l=a._definition.schema[u];"string"!=typeof l&&(c[u]="function"==typeof l?new l:new(v(Object.keys(l)[0]).constructor))}return c},o([b([ye],he)],t.prototype,"types",void 0),o([b("number",he)],t.prototype,"rootType",void 0),t}(pe);y("map",{constructor:h,getProxy:p}),y("array",{constructor:f,getProxy:l}),y("set",{constructor:re}),y("collection",{constructor:oe}),e.ArraySchema=f,e.CollectionSchema=oe,e.Context=m,e.MapSchema=h,e.Reflection=ve,e.ReflectionField=de,e.ReflectionType=ye,e.Schema=pe,e.SchemaDefinition=g,e.SetSchema=re,e.decode=ne,e.defineTypes=function(e,t,n){for(var o in void 0===n&&(n=e._context||_),t)b(t[o],n)(e.prototype,o);return e},e.deprecated=function(e){return void 0===e&&(e=!0),function(t,n){var o=t.constructor._definition;o.deprecated[n]=!0,e&&(o.descriptors[n]={get:function(){throw new Error(n+" is deprecated.")},set:function(){},enumerable:!1,configurable:!0})}},e.dumpChanges=function(e){for(var t=[e.$changes],n={},o=n,r=function(e){var n=t[e];n.changes.forEach(function(e){var t=n.ref,r=e.index,i=t._definition?t._definition.fieldsByIndex[r]:t.$indexes.get(r);o[i]=n.getValue(r)})},i=0;i<1;i++)r(i);return n},e.encode=L,e.filter=function(e){return function(t,n){var o=t.constructor;o._definition.addFilter(n,e)&&(o._context.useFilters=!0)}},e.filterChildren=function(e){return function(t,n){var o=t.constructor;o._definition.addChildrenFilter(n,e)&&(o._context.useFilters=!0)}},e.hasFilter=function(e){return e._context&&e._context.useFilters},e.registerType=y,e.type=b,Object.defineProperty(e,"__esModule",{value:!0})}(t)}(0,e.exports),e.exports}(),B=function(){function e(e,t){var n=this;this.onStateChange=F(),this.onError=F(),this.onLeave=F(),this.onJoin=F(),this.hasJoined=!1,this.onMessageHandlers=U(),this.id=null,this.name=e,t&&(this.serializer=new(N("schema")),this.rootSchema=t,this.serializer.state=new t),this.onError(function(e,t){return console.warn("colyseus.js - onError => ("+e+") "+t)}),this.onLeave(function(){return n.removeAllListeners()})}return e.prototype.connect=function(e){var t=this;this.connection=new C,this.connection.events.onmessage=this.onMessageCallback.bind(this),this.connection.events.onclose=function(e){if(!t.hasJoined)return console.warn("Room connection was closed unexpectedly ("+e.code+"): "+e.reason),void t.onError.invoke(e.code,e.reason);t.onLeave.invoke(e.code),t.destroy()},this.connection.events.onerror=function(e){console.warn("Room, onError ("+e.code+"): "+e.reason),t.onError.invoke(e.code,e.reason)},this.connection.connect(e)},e.prototype.leave=function(e){var n=this;return void 0===e&&(e=!0),new Promise(function(o){n.onLeave(function(e){return o(e)}),n.connection?e?n.connection.send([t.Protocol.LEAVE_ROOM]):n.connection.close():n.onLeave.invoke(4e3)})},e.prototype.onMessage=function(e,t){return this.onMessageHandlers.on(this.getMessageHandlerKey(e),t)},e.prototype.send=function(e,n){var o,r=[t.Protocol.ROOM_DATA];if("string"==typeof e?G.encode.string(r,e):G.encode.number(r,e),void 0!==n){var i=P(n);(o=new Uint8Array(r.length+i.byteLength)).set(new Uint8Array(r),0),o.set(new Uint8Array(i),r.length)}else o=new Uint8Array(r);this.connection.send(o.buffer)},Object.defineProperty(e.prototype,"state",{get:function(){return this.serializer.getState()},enumerable:!1,configurable:!0}),e.prototype.removeAllListeners=function(){this.onJoin.clear(),this.onStateChange.clear(),this.onError.clear(),this.onLeave.clear(),this.onMessageHandlers.events={}},e.prototype.onMessageCallback=function(e){var n=Array.from(new Uint8Array(e.data)),o=n[0];if(o===t.Protocol.JOIN_ROOM){var r=1;if(this.serializerId=D(n,r),r+=j(this.serializerId),!this.serializer){var i=N(this.serializerId);this.serializer=new i}n.length>r&&this.serializer.handshake&&this.serializer.handshake(n,{offset:r}),this.hasJoined=!0,this.onJoin.invoke(),this.connection.send([t.Protocol.JOIN_ROOM])}else if(o===t.Protocol.ERROR){var s={offset:1},a=G.decode.number(n,s),c=G.decode.string(n,s);this.onError.invoke(a,c)}else if(o===t.Protocol.LEAVE_ROOM)this.leave();else if(o===t.Protocol.ROOM_DATA_SCHEMA){var u={offset:1};(c=new(f=this.serializer.getState().constructor._context.get(G.decode.number(n,u)))).decode(n,u),this.dispatchMessage(f,c)}else if(o===t.Protocol.ROOM_STATE)n.shift(),this.setState(n);else if(o===t.Protocol.ROOM_STATE_PATCH)n.shift(),this.patch(n);else if(o===t.Protocol.ROOM_DATA){var l={offset:1},f=G.decode.stringCheck(n,l)?G.decode.string(n,l):G.decode.number(n,l);c=n.length>l.offset?O(e.data,l.offset):void 0,this.dispatchMessage(f,c)}},e.prototype.setState=function(e){this.serializer.setState(e),this.onStateChange.invoke(this.serializer.getState())},e.prototype.patch=function(e){this.serializer.patch(e),this.onStateChange.invoke(this.serializer.getState())},e.prototype.dispatchMessage=function(e,t){var n=this.getMessageHandlerKey(e);this.onMessageHandlers.events[n]?this.onMessageHandlers.emit(n,t):this.onMessageHandlers.events["*"]?this.onMessageHandlers.emit("*",e,t):console.warn("colyseus.js: onMessage() not registered for type '"+e+"'.")},e.prototype.destroy=function(){this.serializer&&this.serializer.teardown()},e.prototype.getMessageHandlerKey=function(e){switch(typeof e){case"function":return"$"+e._typeid;case"string":return e;case"number":return"i"+e;default:throw new Error("invalid message type.")}},e}();function V(){return k||(k="undefined"!=typeof cc&&cc.sys&&cc.sys.localStorage?cc.sys.localStorage:"undefined"!=typeof window&&window.localStorage?window.localStorage:{cache:{},setItem:function(e,t){this.cache[e]=t},getItem:function(e){this.cache[e]},removeItem:function(e){delete this.cache[e]}}),k}var H,J="colyseus-auth-token";t.Platform=void 0,(H=t.Platform||(t.Platform={})).ios="ios",H.android="android";var q,z=function(){function e(e){var t,n,o,r=this;this._id=void 0,this.username=void 0,this.displayName=void 0,this.avatarUrl=void 0,this.isAnonymous=void 0,this.email=void 0,this.lang=void 0,this.location=void 0,this.timezone=void 0,this.metadata=void 0,this.devices=void 0,this.facebookId=void 0,this.twitterId=void 0,this.googleId=void 0,this.gameCenterId=void 0,this.steamId=void 0,this.friendIds=void 0,this.blockedUserIds=void 0,this.createdAt=void 0,this.updatedAt=void 0,this.token=void 0,this.endpoint=e.replace("ws","http"),t=J,n=function(e){return r.token=e},o=V().getItem(t),"undefined"!=typeof Promise&&o instanceof Promise?o.then(function(e){return n(e)}):n(o)}return Object.defineProperty(e.prototype,"hasToken",{get:function(){return!!this.token},enumerable:!1,configurable:!0}),e.prototype.login=function(e){return void 0===e&&(e={}),r(this,void 0,void 0,function(){var t,n,o;return i(this,function(r){switch(r.label){case 0:return t=Object.assign({},e),this.hasToken&&(t.token=this.token),[4,this.request("post","/auth",t)];case 1:for(o in n=r.sent(),this.token=n.token,i=J,s=this.token,V().setItem(i,s),n)this.hasOwnProperty(o)&&(this[o]=n[o]);return this.registerPingService(),[2,this]}var i,s})})},e.prototype.save=function(){return r(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,this.request("put","/auth",{},{username:this.username,displayName:this.displayName,avatarUrl:this.avatarUrl,lang:this.lang,location:this.location,timezone:this.timezone})];case 1:return e.sent(),[2,this]}})})},e.prototype.getFriends=function(){return r(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,this.request("get","/friends/all")];case 1:return[2,e.sent()]}})})},e.prototype.getOnlineFriends=function(){return r(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,this.request("get","/friends/online")];case 1:return[2,e.sent()]}})})},e.prototype.getFriendRequests=function(){return r(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,this.request("get","/friends/requests")];case 1:return[2,e.sent()]}})})},e.prototype.sendFriendRequest=function(e){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.request("post","/friends/requests",{userId:e})];case 1:return[2,t.sent()]}})})},e.prototype.acceptFriendRequest=function(e){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.request("put","/friends/requests",{userId:e})];case 1:return[2,t.sent()]}})})},e.prototype.declineFriendRequest=function(e){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.request("del","/friends/requests",{userId:e})];case 1:return[2,t.sent()]}})})},e.prototype.blockUser=function(e){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.request("post","/friends/block",{userId:e})];case 1:return[2,t.sent()]}})})},e.prototype.unblockUser=function(e){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.request("put","/friends/block",{userId:e})];case 1:return[2,t.sent()]}})})},e.prototype.request=function(e,t,n,o,s){return void 0===n&&(n={}),void 0===s&&(s={}),r(this,void 0,void 0,function(){var r,a,c,u;return i(this,function(i){switch(i.label){case 0:for(a in s.Accept="application/json",this.hasToken&&(s.Authorization="Bearer "+this.token),r=[],n)r.push(a+"="+n[a]);return c=r.length>0?"?"+r.join("&"):"",u={headers:s},o&&(u.body=o),[4,m[e](""+this.endpoint+t+c,u)];case 1:return[2,i.sent().data]}})})},e.prototype.logout=function(){var e;this.token=void 0,e=J,V().removeItem(e),this.unregisterPingService()},e.prototype.registerPingService=function(e){var t=this;void 0===e&&(e=15e3),this.unregisterPingService(),this.keepOnlineInterval=setInterval(function(){return t.request("get","/auth")},e)},e.prototype.unregisterPingService=function(){clearInterval(this.keepOnlineInterval)},e}(),W=function(e){function t(n,o){var r=e.call(this,n)||this;return r.code=o,Object.setPrototypeOf(r,t.prototype),r}return o(t,e),t}(Error),K="undefined"!=typeof window&&void 0!==(null===(q=null===window||void 0===window?void 0:window.location)||void 0===q?void 0:q.hostname)?window.location.protocol.replace("http","ws")+"//"+window.location.hostname+(window.location.port&&":"+window.location.port):"ws://127.0.0.1:2567",X=function(){function e(e){void 0===e&&(e=K),this.endpoint=e}return Object.defineProperty(e.prototype,"auth",{get:function(){return this._auth||(this._auth=new z(this.endpoint)),this._auth},enumerable:!1,configurable:!0}),e.prototype.joinOrCreate=function(e,t,n){return void 0===t&&(t={}),r(this,void 0,void 0,function(){return i(this,function(o){switch(o.label){case 0:return[4,this.createMatchMakeRequest("joinOrCreate",e,t,n)];case 1:return[2,o.sent()]}})})},e.prototype.create=function(e,t,n){return void 0===t&&(t={}),r(this,void 0,void 0,function(){return i(this,function(o){switch(o.label){case 0:return[4,this.createMatchMakeRequest("create",e,t,n)];case 1:return[2,o.sent()]}})})},e.prototype.join=function(e,t,n){return void 0===t&&(t={}),r(this,void 0,void 0,function(){return i(this,function(o){switch(o.label){case 0:return[4,this.createMatchMakeRequest("join",e,t,n)];case 1:return[2,o.sent()]}})})},e.prototype.joinById=function(e,t,n){return void 0===t&&(t={}),r(this,void 0,void 0,function(){return i(this,function(o){switch(o.label){case 0:return[4,this.createMatchMakeRequest("joinById",e,t,n)];case 1:return[2,o.sent()]}})})},e.prototype.reconnect=function(e,t,n){return r(this,void 0,void 0,function(){return i(this,function(o){switch(o.label){case 0:return[4,this.createMatchMakeRequest("joinById",e,{sessionId:t},n)];case 1:return[2,o.sent()]}})})},e.prototype.getAvailableRooms=function(e){return void 0===e&&(e=""),r(this,void 0,void 0,function(){var t;return i(this,function(n){switch(n.label){case 0:return t=this.endpoint.replace("ws","http")+"/matchmake/"+e,[4,p(t,{headers:{Accept:"application/json"}})];case 1:return[2,n.sent().data]}})})},e.prototype.consumeSeatReservation=function(e,t){return r(this,void 0,void 0,function(){var n;return i(this,function(){return(n=this.createRoom(e.room.name,t)).id=e.room.roomId,n.sessionId=e.sessionId,n.connect(this.buildEndpoint(e.room,{sessionId:n.sessionId})),[2,new Promise(function(e,t){var o=function(e,n){return t(new _(e,n))};n.onError.once(o),n.onJoin.once(function(){n.onError.remove(o),e(n)})})]})})},e.prototype.createMatchMakeRequest=function(e,t,n,o){return void 0===n&&(n={}),r(this,void 0,void 0,function(){var r,s;return i(this,function(i){switch(i.label){case 0:return r=this.endpoint.replace("ws","http")+"/matchmake/"+e+"/"+t,this._auth&&this._auth.hasToken&&(n.token=this._auth.token),[4,d(r,{headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)})];case 1:if((s=i.sent().data).error)throw new W(s.error,s.code);return[2,this.consumeSeatReservation(s,o)]}})})},e.prototype.createRoom=function(e,t){return new B(e,t)},e.prototype.buildEndpoint=function(e,t){void 0===t&&(t={});var n=[];for(var o in t)t.hasOwnProperty(o)&&n.push(o+"="+t[o]);return this.endpoint+"/"+e.processId+"/"+e.roomId+"?"+n.join("&")},e}(),Y=function(){function e(){}return e.prototype.setState=function(e){this.state.decode(e)},e.prototype.getState=function(){return this.state},e.prototype.patch=function(e){this.state.decode(e)},e.prototype.teardown=function(){var e,t;null===(t=null===(e=this.state)||void 0===e?void 0:e.$changes)||void 0===t||t.root.clearRefs()},e.prototype.handshake=function(e,t){this.state?(new G.Reflection).decode(e,t):this.state=G.Reflection.decode(e,t)},e}(),Q=function(){function e(){}return e.prototype.setState=function(){},e.prototype.getState=function(){return null},e.prototype.patch=function(){},e.prototype.teardown=function(){},e.prototype.handshake=function(){},e}();M("schema",Y),M("none",Q),t.Auth=z,t.Client=X,t.Room=B,t.SchemaSerializer=Y,t.registerSerializer=M,Object.defineProperty(t,"__esModule",{value:!0})})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],AmmonController:[function(e,t,n){"use strict";cc._RF.push(t,"8c3a9f5b0BEeKlTQpi4GYAN","AmmonController");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.InitAmmo=function(e){this.index=e.index,this.UpdatePosition(e.pos)},t.prototype.UpdatePosition=function(e){this.node.position=new cc.Vec3(e.x,e.y,0)},i([a],t)}(cc.Component));n.default=c,cc._RF.pop()},{}],ApiService:[function(e,t,n){"use strict";cc._RF.push(t,"662ffHRIWhFqIBL5VpQWPY8","ApiService");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function s(e){try{c(o.next(e))}catch(t){i(t)}}function a(e){try{c(o.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(e){return function(t){return c([e,t])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(a){i=[6,a],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.EndPoint=void 0;var c,u=e("../ErrorPopup"),l=e("../Utils/GameCofig"),f=cc._decorator,p=f.ccclass;f.property,function(e){e.REQUEST_GET_USER_INFO="/get-info-tele",e.REQUEST_GET_USER_INFO_TEST="/users"}(c=n.EndPoint||(n.EndPoint={}));var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.baseUrl=l.default.apiURL,t}var n;return r(t,e),n=t,t.prototype.onLoad=function(){n.instance=this.getComponent(n)},t.prototype.requestGetUserInfo=function(e){return s(this,void 0,void 0,function(){var t,n;return a(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,fetch(""+this.baseUrl+c.REQUEST_GET_USER_INFO,{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify(e)})];case 1:return[4,o.sent().json()];case 2:return(t=o.sent())?[2,t]:[3,4];case 3:return n=o.sent(),console.log("error = ",n),u.default.instance.ShowErrorPopup(n),[2,!1];case 4:return[2]}})})},t.prototype.requestGetUserInfoTest=function(e){return s(this,void 0,void 0,function(){var t,n;return a(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,fetch(""+this.baseUrl+c.REQUEST_GET_USER_INFO_TEST,{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify(e)})];case 1:return[4,o.sent().json()];case 2:return(t=o.sent())?[2,t]:[3,4];case 3:return n=o.sent(),console.log("error = ",n),u.default.instance.ShowErrorPopup(n),[2,!1];case 4:return[2]}})})},t.instance=null,n=i([p],t)}(cc.Component);n.default=h,cc._RF.pop()},{"../ErrorPopup":"ErrorPopup","../Utils/GameCofig":"GameCofig"}],BulletController:[function(e,t,n){"use strict";cc._RF.push(t,"8a493TpUOhEKJAoFkOrwxVu","BulletController");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.InitBullet=function(e){this.index=e.index,this.UpdateAngle(e.angle),this.UpdatePosition(e.pos)},t.prototype.UpdatePosition=function(e){this.node.position=new cc.Vec3(e.x,e.y,0)},t.prototype.UpdateAngle=function(e){this.node.angle=e},i([a],t)}(cc.Component));n.default=c,cc._RF.pop()},{}],Bullet:[function(e,t,n){"use strict";cc._RF.push(t,"dd435gZb+NGOq8G/XbzBBFp","Bullet");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0}),n.Bullet=void 0;var s=e("@colyseus/schema"),a=e("./Vector"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pos=new a.Vector,t}return r(t,e),i([s.type("string")],t.prototype,"owner_id",void 0),i([s.type("number")],t.prototype,"angle",void 0),i([s.type("number")],t.prototype,"index",void 0),i([s.type(a.Vector)],t.prototype,"pos",void 0),t}(s.Schema);n.Bullet=c,cc._RF.pop()},{"./Vector":"Vector","@colyseus/schema":1}],CharacterController:[function(e,t,n){"use strict";cc._RF.push(t,"82917WZ5cxNyptoq6hEjOHJ","CharacterController");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../SceneManager"),a=e("../Utils/GameCofig"),c=e("./HealthFly"),u=cc._decorator,l=u.ccclass,f=u.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.playerID="",t}return r(t,e),t.prototype.InitCharacterInfo=function(e,t){this.progressBarImg.spriteFrame=t?this.progressBarMe:this.progressBarOpponent,this.progressBar.node.active=!0,this.directionAroud.active=!0,this.playerID=e.id,this.lastHealth=e.health,this.angle=e.angle,this.UpdateHealth(e.health),this.UpdatePosition(e.pos),this.lastState=e.action,this.PlayAnimation()},t.prototype.UpdateHealth=function(e){if(this.lastHealth-e>0){var t=cc.instantiate(this.healthFly);this.healthTarget.addChild(t);var n=t.getComponent(c.default);null!=n&&n.UpdateHealthFly(e-this.lastHealth),this.lastHealth=e}this.heathTxt.string=e+"/"+a.default.MAX_HEATH;var o=e/a.default.MAX_HEATH;this.progressBar.progress=o,e<=0&&(this.animation.play("die"),this.progressBar.node.active=!1,this.directionAroud.active=!1)},t.prototype.UpdatePosition=function(e){this.node.position=new cc.Vec3(e.x,e.y,0)},t.prototype.UpdateAngle=function(e){this.angle=e,this.directionAroud.angle=e,this.PlayAnimation()},t.prototype.UpdateAction=function(e){this.lastState=e,this.PlayAnimation()},t.prototype.PlayAnimation=function(){this.lastState===a.default.ACTION_IDLE&&(this.angle>=-45&&this.angle<45?this.animation.play("idle_right"):this.angle<-45&&this.angle>=-135?this.animation.play("idle_front"):this.angle>=135&&this.angle<180||this.angle>=-180&&this.angle<-135?this.animation.play("idle_left"):this.angle>=45&&this.angle<135&&this.animation.play("idle_back")),this.lastState===a.default.ACTION_MOVE&&(this.angle>=-45&&this.angle<45?this.animation.play("move_right"):this.angle<-45&&this.angle>=-135?this.animation.play("move_front"):this.angle>=135&&this.angle<180||this.angle>=-180&&this.angle<-135?this.animation.play("move_left"):this.angle>=45&&this.angle<135&&this.animation.play("move_back")),this.lastState===a.default.ACTION_SHOOT&&(this.angle>=-45&&this.angle<45?this.animation.play("shoot_right"):this.angle<-45&&this.angle>=-135?this.animation.play("shoot_front"):this.angle>=135&&this.angle<180||this.angle>=-180&&this.angle<-135?this.animation.play("shoot_left"):this.angle>=45&&this.angle<135&&this.animation.play("shoot_back"))},t.prototype.onCollisionEnter=function(e){1===e.tag&&(this.playerID===s.default._instance.roomSessionID?this.node.opacity=100:this.node.opacity=0)},t.prototype.onCollisionExit=function(e){1===e.tag&&(this.node.opacity=255)},i([f({type:cc.Label})],t.prototype,"heathTxt",void 0),i([f({type:cc.ProgressBar})],t.prototype,"progressBar",void 0),i([f({type:cc.SpriteFrame})],t.prototype,"progressBarOpponent",void 0),i([f({type:cc.SpriteFrame})],t.prototype,"progressBarMe",void 0),i([f({type:cc.Sprite})],t.prototype,"progressBarImg",void 0),i([f({type:cc.Node})],t.prototype,"directionAroud",void 0),i([f({type:cc.Prefab})],t.prototype,"healthFly",void 0),i([f({type:cc.Node})],t.prototype,"healthTarget",void 0),i([f({type:cc.Animation})],t.prototype,"animation",void 0),i([l],t)}(cc.Component);n.default=p,cc._RF.pop()},{"../SceneManager":"SceneManager","../Utils/GameCofig":"GameCofig","./HealthFly":"HealthFly"}],CollisionObject:[function(e,t,n){"use strict";cc._RF.push(t,"3d2e6ymNUxA/4NUOrDSUYFD","CollisionObject");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.start=function(){console.log("CollisionObject CollisionObject"),cc.director.getCollisionManager().enabled=!0},i([a],t)}(cc.Component));n.default=c,cc._RF.pop()},{}],ErrorPopup:[function(e,t,n){"use strict";cc._RF.push(t,"49fe87J/w5KKoHfOWhm8xQA","ErrorPopup");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.errorTxt=null,t.errorPopup=null,t}var n;return r(t,e),n=t,t.prototype.onLoad=function(){null==n.instance&&(n.instance=this),this.errorPopup.active=!1},t.prototype.ShowErrorPopup=function(e){this.errorTxt.string=e,this.errorPopup.active=!0},t.prototype.OnClickClose=function(){this.errorPopup.active=!1},t.instance=null,i([c(cc.Label)],t.prototype,"errorTxt",void 0),i([c(cc.Node)],t.prototype,"errorPopup",void 0),n=i([a],t)}(cc.Component);n.default=u,cc._RF.pop()},{}],GameCofig:[function(e,t,n){"use strict";cc._RF.push(t,"954eefIi99I4aGH+gKvQq+L","GameCofig"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.serverURL="survivor-be-production.up.railway.app",e.apiURL="https://survivor-be-production.up.railway.app",e.port="2567",e.serverName="my_room",e.maxPlayer="maxPlayer",e.timeWaiting="timeCountdownWaiting",e.roomStatus="roomStatus",e.timeCountdown="timeCountdownStart",e.timeWaitingFinish="timeWaitingFinish",e.remainItem="remainItem",e.action="action",e.angle="angle",e.position="pos",e.health="health",e.score="score",e.itemType="itemType",e.Host="Host",e.bullets="bullets",e.mapSize="mapSize",e.nextSize="nextSize",e.playerName="playerName",e.isShowReward="isShowReward",e.rank="rank",e.reward="reward",e.sessionId="sessionId",e.RoomId="RoomId",e.numberPlayerInRoom="Waiting for other player!",e.StartInRoom="Match Start in ",e.MAX_HEATH=100,e.ACTION_IDLE=0,e.ACTION_MOVE=1,e.ACTION_SHOOT=2,e}();n.default=o,cc._RF.pop()},{}],GameDefine:[function(e,t,n){"use strict";cc._RF.push(t,"b452eGnjGlDdpvT+q1aGS/d","GameDefine"),Object.defineProperty(n,"__esModule",{value:!0}),n.LANGUAGES=n.GAME_STATE=void 0,function(e){e[e.LOGIN_MENU=0]="LOGIN_MENU",e[e.MAINMENU_MENU=1]="MAINMENU_MENU",e[e.LOBBY_MENU=2]="LOBBY_MENU",e[e.GAME_PLAY=3]="GAME_PLAY",e[e.LOGIN_POPUP=4]="LOGIN_POPUP",e[e.ENDGAME_MENU=5]="ENDGAME_MENU"}(n.GAME_STATE||(n.GAME_STATE={})),function(e){e[e.VN=0]="VN",e[e.EN=1]="EN"}(n.LANGUAGES||(n.LANGUAGES={})),cc._RF.pop()},{}],GamePlayManager:[function(e,t,n){"use strict";cc._RF.push(t,"a3a78cHKpVOT6/291/ru+tf","GamePlayManager");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0}),n.GamePlayManager=void 0;var s=e("../SceneManager"),a=e("../Utils/GameDefine"),c=e("./AmmonController"),u=e("./BulletController"),l=e("./CharacterController"),f=e("./GamePlayUI"),p=cc._decorator,h=p.ccclass,d=p.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.playerPrefab=null,t.bulletPrefab=null,t.ammoPrefab=null,t.target=null,t.dangerAround=null,t.nextDangerAround=null,t.countDownLabel=null,t.countDownLocalLabel=null,t.playerMe=null,t.timeRemain=0,t.remainItemLabel=null,t.limitView=null,t.action=!1,t.listCharacter=[],t.listBullet=[],t.listAmmo=[],t}return r(t,e),t.prototype.onEnable=function(){var e=this;this.ResetGame(),this.OnCreatePlayer(),this.OnCreateAmmo(),setTimeout(function(){return e.EnableAction()},6e3)},t.prototype.EnableAction=function(){this.action=!0},t.prototype.OnCreatePlayer=function(){var e=this;s.default._instance.listPlayers.forEach(function(t){var n=cc.instantiate(e.playerPrefab);e.target.addChild(n);var o=n.getComponent(l.default);null!=o&&(e.listCharacter.push(o),o.InitCharacterInfo(t,s.default._instance.roomSessionID===t.id)),s.default._instance.roomSessionID===t.id&&(e.playerMe=t,e.UpdateCameraFloow(new cc.Vec3(e.playerMe.pos.x,e.playerMe.pos.y,0)),e.UpdateNumberBullet(t.bullets))})},t.prototype.OnLeaveRoom=function(){this.ResetGame(),s.default._instance.gameState=a.GAME_STATE.MAINMENU_MENU,s.default._instance.handleGameState()},t.prototype.ResetGame=function(){this.listCharacter.forEach(function(e){e.node.destroy()});var e=this.listCharacter.length;this.listCharacter.splice(0,e),this.listBullet.forEach(function(e){e.node.destroy()}),e=this.listBullet.length,this.listBullet.splice(0,e),this.listAmmo.forEach(function(e){e.node.destroy()}),e=this.listAmmo.length,this.listAmmo.splice(0,e)},t.prototype.OnCreateBullet=function(e){var t=cc.instantiate(this.bulletPrefab);this.target.addChild(t);var n=t.getComponent(u.default);null!=n&&(this.listBullet.push(n),n.InitBullet(e))},t.prototype.OnCreateAmmoIngame=function(e){var t=cc.instantiate(this.ammoPrefab);this.target.addChild(t);var n=t.getComponent(c.default);null!=n&&(this.listAmmo.push(n),n.InitAmmo(e))},t.prototype.OnCreateAmmo=function(){var e=this;s.default._instance.listAmmo.forEach(function(t){var n=cc.instantiate(e.ammoPrefab);e.target.addChild(n);var o=n.getComponent(c.default);null!=o&&(e.listAmmo.push(o),o.InitAmmo(t))})},t.prototype.UpdateNumberBullet=function(e){var t;null===(t=this.gameUI)||void 0===t||t.BulletChange(e)},t.prototype.UpdateResult=function(e){var t;null===(t=this.gameUI)||void 0===t||t.ShowResult(e)},t.prototype.UpdateCoin=function(e){var t;null===(t=this.gameUI)||void 0===t||t.ShowCoin(e)},t.prototype.UpdateCameraFloow=function(e){this.CameraFollow.position=new cc.Vec3(e.x,e.y,e.z),this.limitView.position=new cc.Vec3(e.x,e.y,e.z)},t.prototype.UpdateDangerAround=function(e){this.dangerAround.setContentSize(2*e,2*e)},t.prototype.UpdateNextDangerAround=function(e){this.nextDangerAround.setContentSize(2*e,2*e)},t.prototype.CountDownChange=function(e){this.timeRemain=e,this.countDownLabel.string=this.secondsToDhms(e),e<10&&cc.tween(this.countDownLabel.node).to(.1,{scale:1.3}).by(.3,{scale:-.3},{easing:"sineOutIn"}).start()},t.prototype.secondsToDhms=function(e){e=Number(e),Math.floor(e/86400),Math.floor(e%86400/3600);var t=Math.floor(e%3600/60),n=Math.floor(e%60);return(t>0?(t>9?"":"0")+t:"00")+":"+(n>0?(n>9?"":"0")+n:"00")},i([d({type:cc.Prefab})],t.prototype,"playerPrefab",void 0),i([d({type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([d({type:cc.Prefab})],t.prototype,"ammoPrefab",void 0),i([d({type:cc.Node})],t.prototype,"CameraFollow",void 0),i([d({type:f.default})],t.prototype,"gameUI",void 0),i([d({type:cc.Node})],t.prototype,"target",void 0),i([d({type:cc.Node})],t.prototype,"dangerAround",void 0),i([d({type:cc.Node})],t.prototype,"nextDangerAround",void 0),i([d({type:cc.Label})],t.prototype,"countDownLabel",void 0),i([d({type:cc.Label})],t.prototype,"countDownLocalLabel",void 0),i([d({type:cc.Label})],t.prototype,"remainItemLabel",void 0),i([d({type:cc.Node})],t.prototype,"limitView",void 0),i([h("GamePlayManager")],t)}(cc.Component);n.GamePlayManager=y,cc._RF.pop()},{"../SceneManager":"SceneManager","../Utils/GameDefine":"GameDefine","./AmmonController":"AmmonController","./BulletController":"BulletController","./CharacterController":"CharacterController","./GamePlayUI":"GamePlayUI"}],GamePlayUI:[function(e,t,n){"use strict";cc._RF.push(t,"83fc8tzPYBMVaNGO3Mfk6lC","GamePlayUI");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../SceneManager"),a=e("../Utils/GameCofig"),c=e("../Utils/GameDefine"),u=cc._decorator,l=u.ccclass,f=u.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.countDownLabel=null,t.numberBulletTxt=null,t.aliveTxt=null,t.rankTxt=null,t.touch=null,t.startUI=null,t.resultUI=null,t.coinTxt=null,t}return r(t,e),t.prototype.start=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},t.prototype.onKeyUp=function(e){switch(e.keyCode){case cc.macro.KEY.space:console.log("release a key"),s.default._instance.playerActionShoot(a.default.ACTION_SHOOT)}},t.prototype.onEnable=function(){this.touch.active=!1,this.resultUI.active=!1,this.startUI.active=!0,this.aliveTxt.string="Alive: "+s.default._instance.listPlayers.length,this.live=s.default._instance.listPlayers.length},t.prototype.BulletChange=function(e){this.numberBulletTxt.string="X"+e},t.prototype.AliveChange=function(){this.live--,this.aliveTxt.string="Alive: "+this.live},t.prototype.ShowResult=function(e){this.rankTxt.string=e+"ST",this.resultUI.active=!0,cc.tween(this.resultUI).to(0,{scale:0}).by(.3,{scale:1}).start()},t.prototype.ShowCoin=function(e){this.coinTxt.string=e>0?"+"+e:""+e},t.prototype.CountDownChange=function(e){this.countDownLabel.string=""+e,e<10&&cc.tween(this.countDownLabel.node).to(.1,{scale:1.3}).by(.3,{scale:-.3},{easing:"sineOutIn"}).start(),e<=0&&(this.touch.active=!0,this.startUI.active=!1)},t.prototype.OnClickLeaveGame=function(){s.default._instance.playerLeaveGame(),s.default._instance.gameState=c.GAME_STATE.MAINMENU_MENU,s.default._instance.handleGameState()},t.prototype.OnClickShoot=function(){s.default._instance.playerActionShoot(a.default.ACTION_SHOOT)},i([f({type:cc.Label})],t.prototype,"countDownLabel",void 0),i([f({type:cc.Label})],t.prototype,"numberBulletTxt",void 0),i([f({type:cc.Label})],t.prototype,"aliveTxt",void 0),i([f({type:cc.Label})],t.prototype,"rankTxt",void 0),i([f({type:cc.Node})],t.prototype,"touch",void 0),i([f({type:cc.Node})],t.prototype,"startUI",void 0),i([f({type:cc.Node})],t.prototype,"resultUI",void 0),i([f({type:cc.Label})],t.prototype,"coinTxt",void 0),i([l],t)}(cc.Component);n.default=p,cc._RF.pop()},{"../SceneManager":"SceneManager","../Utils/GameCofig":"GameCofig","../Utils/GameDefine":"GameDefine"}],HealthFly:[function(e,t,n){"use strict";cc._RF.push(t,"3eb37HsPF1FhK+dBhYL1ElN","HealthFly");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.UpdateHealthFly=function(e){var t=this;this.heathTxt.string=""+e,cc.tween(this.node).to(1,{position:new cc.Vec3(0,100,0)}).call(function(){t.node.destroy()}).start()},i([c({type:cc.Label})],t.prototype,"heathTxt",void 0),i([a],t)}(cc.Component);n.default=u,cc._RF.pop()},{}],Item:[function(e,t,n){"use strict";cc._RF.push(t,"3cf7cyIbZZAT7uGp5LM9BUD","Item");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0}),n.Item=void 0;var s=e("@colyseus/schema"),a=e("./Vector"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pos=new a.Vector,t}return r(t,e),i([s.type("string")],t.prototype,"type",void 0),i([s.type(a.Vector)],t.prototype,"pos",void 0),i([s.type("number")],t.prototype,"radius",void 0),i([s.type("number")],t.prototype,"index",void 0),t}(s.Schema);n.Item=c,cc._RF.pop()},{"./Vector":"Vector","@colyseus/schema":1}],JoystickController:[function(e,t,n){"use strict";cc._RF.push(t,"f125aG4ZNZHLoldNz1SkSrM","JoystickController");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../SceneManager"),a=e("../Utils/GameCofig"),c=cc._decorator,u=c.ccclass,l=c.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Joystick_Ball=null,t.Joystick_Max=200,t}return r(t,e),t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.Joystick_Touch_Start,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.Joystick_Touch_Move,this),this.node.on(cc.Node.EventType.TOUCH_END,this.Joystick_Touch_End,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.Joystick_Touch_End,this)},t.prototype.Joystick_Touch_Start=function(e){var t=e.getLocation(),n=this.node.convertToNodeSpaceAR(t);this.Limit_joystick_Vector(n),this.Set_Joystick_Ball_Position(n),this.Joystick_Vector=n;var o=this.Joystick_Vector.x,r=this.Joystick_Vector.y;this.angle=180*Math.atan2(r,o)/Math.PI,this.index=0,s.default._instance.playerActionMove(a.default.ACTION_MOVE,this.angle)},t.prototype.Joystick_Touch_Move=function(e){var t=e.getTouches()[0].getLocation(),n=this.node.convertToNodeSpaceAR(t);if(this.Limit_joystick_Vector(n),this.Set_Joystick_Ball_Position(n),this.Joystick_Vector=n,this.index++,this.index>20){var o=this.Joystick_Vector.x,r=this.Joystick_Vector.y;this.angle=180*Math.atan2(r,o)/Math.PI,this.index=0,s.default._instance.playerActionMove(a.default.ACTION_MOVE,this.angle)}},t.prototype.Joystick_Touch_End=function(){this.Joystick_Vector=new cc.Vec2(0,0),this.Set_Joystick_Ball_Position(cc.Vec2.ZERO),s.default._instance.playerActionMove(a.default.ACTION_IDLE,0)},t.prototype.Set_Joystick_Ball_Position=function(e){this.Joystick_Ball.setPosition(e)},t.prototype.Limit_joystick_Vector=function(e){var t=e.mag();t>this.Joystick_Max&&e.mulSelf(this.Joystick_Max/t)},i([l(cc.Node)],t.prototype,"Joystick_Ball",void 0),i([u],t)}(cc.Component);n.default=f,cc._RF.pop()},{"../SceneManager":"SceneManager","../Utils/GameCofig":"GameCofig"}],LoadingMgr:[function(e,t,n){"use strict";cc._RF.push(t,"045cbwU71dCapc/UeRx7dcd","LoadingMgr");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.loading=null,t}return r(t,e),t.prototype.onEnable=function(){setInterval(this.RotationLoading.bind(this),200)},t.prototype.RotationLoading=function(){this.loading.angle-=30},i([c(cc.Node)],t.prototype,"loading",void 0),i([a],t)}(cc.Component);n.default=u,cc._RF.pop()},{}],LobbyManager:[function(e,t,n){"use strict";cc._RF.push(t,"03355u6SQ9GNJcYPOtQMgn5","LobbyManager");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0}),n.LobbyManager=void 0;var s=e("./PlayerItemManager"),a=e("../SceneManager"),c=e("../Utils/GameCofig"),u=e("../Utils/GameDefine"),l=cc._decorator,f=l.ccclass,p=l.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.arrayItemPlayer=[],t.playerCountLabel=null,t.countDownLabel=null,t.quitPopup=null,t.countPlayer=0,t.indexPlayer=0,t}return r(t,e),t.prototype.onEnable=function(){this.playerCountLabel.string=this.countPlayer+"/"+a.default._instance.numPlayer;for(var e=a.default._instance.numPlayer;e<this.arrayItemPlayer.length;e++)this.arrayItemPlayer[e].active=!1;this.arrayItemPlayer.forEach(function(e){var t=e.getComponent(s.PlayerItemManager);null!=t&&(t.RemovePlayerInfo(),t.hadInfoPlayer=!1)}),this.countPlayer=0,this.quitPopup.active=!1,cc.tween(this.node).to(0,{scale:0}).by(.3,{scale:1}).start()},t.prototype.CreatePlayer=function(e,t){var n=this,o=!1,r=0;this.arrayItemPlayer.forEach(function(i){if(r++,!o){var a=i.getComponent(s.PlayerItemManager);return null!=a&&0==a.hadInfoPlayer?(a.InitPlayerInfo(e,t),a.hadInfoPlayer=!0,o=!0,n.indexPlayer=r,void n.countPlayer++):void 0}}),this.playerCountLabel.string=this.countPlayer+"/"+a.default._instance.numPlayer},t.prototype.RemovePlayer=function(e){var t=this;this.arrayItemPlayer.forEach(function(n){var o=n.getComponent(s.PlayerItemManager);if(null!=o&&o.playerID===e)return o.RemovePlayerInfo(),o.hadInfoPlayer=!1,void t.countPlayer--}),this.playerCountLabel.string=this.countPlayer+"/"+a.default._instance.numPlayer},t.prototype.OnClickQuit=function(){this.quitPopup.active=!0},t.prototype.OnClickQuitNo=function(){this.quitPopup.active=!1},t.prototype.OnClickQuitYes=function(){a.default._instance.playerLeaveRoom(),this.quitPopup.active=!1,a.default._instance.gameState=u.GAME_STATE.MAINMENU_MENU,a.default._instance.handleGameState()},t.prototype.CountDownChange=function(e){this.countPlayer<a.default._instance.numPlayer?this.countDownLabel.string=c.default.numberPlayerInRoom:this.countDownLabel.string=c.default.StartInRoom+this.secondsToDhms(e)+"s",e<10&&cc.tween(this.countDownLabel.node).to(.1,{scale:1.3}).by(.3,{scale:-.3},{easing:"sineOutIn"}).start()},t.prototype.secondsToDhms=function(e){e=Number(e),Math.floor(e/86400),Math.floor(e%86400/3600);var t=Math.floor(e%3600/60),n=Math.floor(e%60);return(t>0?(t>9?"":"0")+t:"00")+":"+(n>0?(n>9?"":"0")+n:"00")},i([p({type:cc.Node})],t.prototype,"arrayItemPlayer",void 0),i([p({type:cc.Label})],t.prototype,"playerCountLabel",void 0),i([p({type:cc.Label})],t.prototype,"countDownLabel",void 0),i([p({type:cc.Node})],t.prototype,"quitPopup",void 0),i([f("LobbyManager")],t)}(cc.Component);n.LobbyManager=h,cc._RF.pop()},{"../SceneManager":"SceneManager","../Utils/GameCofig":"GameCofig","../Utils/GameDefine":"GameDefine","./PlayerItemManager":"PlayerItemManager"}],LoginMenuManager:[function(e,t,n){"use strict";cc._RF.push(t,"90622yS0WBLq4tvmA4mRmgw","LoginMenuManager");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0}),n.LoginMenuManager=void 0;var s=cc._decorator,a=s.ccclass,c=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._loginBtn=null,t.teleID=null,t}var n;return r(t,e),n=t,t.prototype.onLoad=function(){n._instance=this.getComponent(n),cc.tween(this.node).to(0,{scale:0}).by(.3,{scale:1}).start()},t.prototype.OnClickLogin=function(){window.location.reload()},t.prototype.ShowTeleID=function(e){this.teleID.string="Tele ID :"+e},t._instance=null,i([c(cc.Button)],t.prototype,"_loginBtn",void 0),i([c(cc.Label)],t.prototype,"teleID",void 0),n=i([a("LoginMenuManager")],t)}(cc.Component);n.LoginMenuManager=u,cc._RF.pop()},{}],MainMenuManager:[function(e,t,n){"use strict";cc._RF.push(t,"4608a6pRhxOVa9IS0nMQgng","MainMenuManager");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function s(e){try{c(o.next(e))}catch(t){i(t)}}function a(e){try{c(o.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(e){return function(t){return c([e,t])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(a){i=[6,a],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=e("./API/ApiService"),u=e("./API/Web3Service"),l=e("./ErrorPopup"),f=e("./SceneManager"),p=e("./UserMgr"),h=cc._decorator,d=h.ccclass,y=h.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.addressTxt=null,t.amounTxt=null,t}return r(t,e),t.prototype.OnClickStartGame=function(){p.default.instance.amount<10?l.default.instance.ShowErrorPopup("Your coin count < 10, You cannot play the game!"):(f.default._instance.ShowLoading(!0),f.default._instance.joingame())},t.prototype.onEnable=function(){this.GetInfoUser();var e=p.default.instance.address;null!==e&&(this.addressTxt.string=e.substr(0,5)+"..."+e.substring(e.length-6,e.length-1)),this.amounTxt.string=""+p.default.instance.amount},t.prototype.GetInfoUser=function(){return s(this,void 0,void 0,function(){var e,t;return a(this,function(n){switch(n.label){case 0:return f.default._instance.ShowLoading(!0),e={auth:u.default.instance.s_teleID},[4,c.default.instance.requestGetUserInfo(e)];case 1:return t=n.sent(),console.log("GetInfoUser = ",t),t&&"404 Error."!==t.error?t.message&&""!==t.message?l.default.instance.ShowErrorPopup(t.message):(p.default.instance._id=t._id,p.default.instance.amount=t.amount,p.default.instance.address=t.address,p.default.instance.privateKey=t.privateKey,p.default.instance.teleId=t.teleId,this.amounTxt.string=""+p.default.instance.amount):l.default.instance.ShowErrorPopup("Error when call API"),f.default._instance.ShowLoading(!1),[2]}})})},t.prototype.GetInfoUserTest=function(){return s(this,void 0,void 0,function(){var e,t;return a(this,function(n){switch(n.label){case 0:return f.default._instance.ShowLoading(!0),e={teleId:u.default.instance.s_teleID},[4,c.default.instance.requestGetUserInfoTest(e)];case 1:return t=n.sent(),console.log("GetInfoUser = ",t),t&&"404 Error."!==t.error?t.message&&""!==t.message?l.default.instance.ShowErrorPopup(t.message):(p.default.instance._id=t._id,p.default.instance.amount=t.amount,p.default.instance.address=t.address,p.default.instance.privateKey=t.privateKey,p.default.instance.teleId=t.teleId,this.amounTxt.string=""+p.default.instance.amount):l.default.instance.ShowErrorPopup("Error when call API"),f.default._instance.ShowLoading(!1),[2]}})})},i([y(cc.Label)],t.prototype,"addressTxt",void 0),i([y(cc.Label)],t.prototype,"amounTxt",void 0),i([d],t)}(cc.Component);n.default=v,cc._RF.pop()},{"./API/ApiService":"ApiService","./API/Web3Service":"Web3Service","./ErrorPopup":"ErrorPopup","./SceneManager":"SceneManager","./UserMgr":"UserMgr"}],MyRoomState:[function(e,t,n){"use strict";cc._RF.push(t,"fc9e8POekpLoqOUb3rn35su","MyRoomState");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0}),n.MyRoomState=void 0;var s=e("@colyseus/schema"),a=e("./Player"),c=e("./Bullet"),u=e("./Item"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.players=new s.MapSchema,t.bulletArr=new s.ArraySchema,t.itemArr=new s.ArraySchema,t.itemCollect=new s.ArraySchema,t}return r(t,e),i([s.type("string")],t.prototype,"messagedata",void 0),i([s.type("number")],t.prototype,"timeCountdownWaiting",void 0),i([s.type("number")],t.prototype,"timeCountdownStart",void 0),i([s.type("number")],t.prototype,"timeGamePlay",void 0),i([s.type("number")],t.prototype,"roomStatus",void 0),i([s.type({map:a.Player})],t.prototype,"players",void 0),i([s.type([c.Bullet])],t.prototype,"bulletArr",void 0),i([s.type([u.Item])],t.prototype,"itemArr",void 0),i([s.type([u.Item])],t.prototype,"itemCollect",void 0),i([s.type("number")],t.prototype,"mapSize",void 0),i([s.type("number")],t.prototype,"nextSize",void 0),t}(s.Schema);n.MyRoomState=l,cc._RF.pop()},{"./Bullet":"Bullet","./Item":"Item","./Player":"Player","@colyseus/schema":1}],PlayerItemManager:[function(e,t,n){"use strict";cc._RF.push(t,"a34afZnefJCK5gCWxj3/QI5","PlayerItemManager");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0}),n.PlayerItemManager=void 0;var s=cc._decorator,a=s.ccclass,c=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.playerNameLabel=null,t.startM=null,t.hadInfoPlayer=!1,t.playerName="...",t.playerID="...",t}return r(t,e),t.prototype.InitPlayerInfo=function(e,t,n){void 0===n&&(n=""),null!=e&&(this.playerNameLabel.string=""!=n?n:e.name,this.playerID=e.id,this.startM.active=t)},t.prototype.RemovePlayerInfo=function(){this.playerNameLabel.string="..........",this.playerID="",this.startM.active=!1},i([c({type:cc.Label})],t.prototype,"playerNameLabel",void 0),i([c({type:cc.Node})],t.prototype,"startM",void 0),i([a("PlayerItemManager")],t)}(cc.Component);n.PlayerItemManager=u,cc._RF.pop()},{}],PlayerManager:[function(e,t,n){"use strict";cc._RF.push(t,"994e2unPcRPUKc/vXNzgdnM","PlayerManager");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0}),n.PlayerManager=void 0;var s=e("./SceneManager"),a=e("./Schemas/Vector"),c=e("./Sound/SoundManager"),u=cc._decorator,l=u.ccclass,f=u.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.frameBG=null,t.frameAvatarBG=null,t.playerNameLabel=null,t.frameMeBGIgm=null,t.frameBGIgm=null,t.frameMeAvatarBGIgm=null,t.frameAvatarBGIgm=null,t.hadInfoPlayer=!1,t.playerName="...",t.chopstick=null,t.handGold=null,t.handNormal=null,t.chopstickGold=null,t.chopstickNormal=null,t.playerID="",t.angleChopstick=0,t.itemArrayImg=new Array,t.avatar=null,t.scorelabel=null,t.score=0,t.animationComponent=null,t}return r(t,e),t.prototype.onEnable=function(){this.animationComponent=this.chopstick.getComponent(cc.Animation)},t.prototype.InitPlayerInfo=function(e,t){this.scorelabel.string="0",this.playerID=e.id,this.playerNameLabel.string=e.name,this.playerName=e.id,this.UpdateChopstickPos(e.pos.x,e.pos.y,0),this.UpdateChopstickAngle(0,e.angle,0);var n=this.frameBG.getComponent(cc.Sprite),o=this.frameAvatarBG.getComponent(cc.Sprite),r=(this.avatar.getComponent(cc.Sprite),this.chopstick.getComponent(cc.Sprite));null!=r&&(2==s.default._instance.playerOPtion?r.spriteFrame=t?this.chopstickGold:this.chopstickNormal:r.spriteFrame=t?this.handGold:this.handNormal),null!=n&&(n.spriteFrame=t?this.frameMeBGIgm:this.frameBGIgm),null!=o&&(o.spriteFrame=t?this.frameMeAvatarBGIgm:this.frameAvatarBGIgm)},t.prototype.PlayChopstickAnim=function(e){0==s.default._instance.playerOPtion?e?this.animationComponent.play("chopstickgold"):this.animationComponent.play("chopstick"):1==s.default._instance.playerOPtion||s.default._instance.playerOPtion},t.prototype.ShowFoodOnChopstick=function(){},t.prototype.PlaySoundEat=function(e){1==e?c.default.inst.playSFX(c.AudioClips.eatingchew):0==e&&c.default.inst.playSFX(c.AudioClips.eating)},t.prototype.UpdateChopstickPos=function(e,t,n){cc.tween(this.chopstick).to(.1,{position:new cc.Vec3(e,t,n)}).start();var o=new a.Vector(0,0),r=new a.Vector(this.chopstick.position.x,this.chopstick.position.y);this.distance2Point(r,o)<1&&this.ShowFoodOnChopstick(this.itemArrayImg.length-1)},t.prototype.UpdateChopstickAngle=function(e,t){this.angleChopstick=e,cc.tween(this.chopstick).to(.1,{angle:t}).start()},t.prototype.UpdatePlayerScore=function(e){this.score=e,this.scorelabel.string=""+e},t.prototype.distance2Point=function(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))},i([f({type:cc.Node})],t.prototype,"frameBG",void 0),i([f({type:cc.Node})],t.prototype,"frameAvatarBG",void 0),i([f({type:cc.Label})],t.prototype,"playerNameLabel",void 0),i([f({type:cc.SpriteFrame})],t.prototype,"frameMeBGIgm",void 0),i([f({type:cc.SpriteFrame})],t.prototype,"frameBGIgm",void 0),i([f({type:cc.SpriteFrame})],t.prototype,"frameMeAvatarBGIgm",void 0),i([f({type:cc.SpriteFrame})],t.prototype,"frameAvatarBGIgm",void 0),i([f({type:cc.Node})],t.prototype,"chopstick",void 0),i([f({type:cc.SpriteFrame})],t.prototype,"handGold",void 0),i([f({type:cc.SpriteFrame})],t.prototype,"handNormal",void 0),i([f({type:cc.SpriteFrame})],t.prototype,"chopstickGold",void 0),i([f({type:cc.SpriteFrame})],t.prototype,"chopstickNormal",void 0),i([f(Array(cc.Node))],t.prototype,"itemArrayImg",void 0),i([f({type:cc.Node})],t.prototype,"avatar",void 0),i([f({type:cc.Label})],t.prototype,"scorelabel",void 0),i([l("PlayerManager")],t)}(cc.Component);n.PlayerManager=p,cc._RF.pop()},{"./SceneManager":"SceneManager","./Schemas/Vector":"Vector","./Sound/SoundManager":"SoundManager"}],Player:[function(e,t,n){"use strict";cc._RF.push(t,"fea48rzDppKppADSYLIoOtF","Player");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0}),n.Player=void 0;var s=e("@colyseus/schema"),a=e("./Vector"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pos=new a.Vector,t}return r(t,e),i([s.type("string")],t.prototype,"id",void 0),i([s.type("number")],t.prototype,"rank",void 0),i([s.type("string")],t.prototype,"message",void 0),i([s.type("string")],t.prototype,"name",void 0),i([s.type("string")],t.prototype,"address",void 0),i([s.type("number")],t.prototype,"result",void 0),i([s.type("number")],t.prototype,"weaponIndex",void 0),i([s.type("number")],t.prototype,"index",void 0),i([s.type("boolean")],t.prototype,"isHidden",void 0),i([s.type("number")],t.prototype,"action",void 0),i([s.type("number")],t.prototype,"angle",void 0),i([s.type("number")],t.prototype,"bullets",void 0),i([s.type("number")],t.prototype,"health",void 0),i([s.type("number")],t.prototype,"reward",void 0),i([s.type(a.Vector)],t.prototype,"pos",void 0),t}(s.Schema);n.Player=c,cc._RF.pop()},{"./Vector":"Vector","@colyseus/schema":1}],SceneManager:[function(e,t,n){"use strict";cc._RF.push(t,"558a4U71XpCKqo5XkxobXO2","SceneManager");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function s(e){try{c(o.next(e))}catch(t){i(t)}}function a(e){try{c(o.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(e){return function(t){return c([e,t])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(a){i=[6,a],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=e("./Utils/GameDefine"),u=e("colyseus.js"),l=e("./Lobby/LobbyManager"),f=e("./Utils/GameCofig"),p=e("./GamePlay/GamePlayUI"),h=e("./GamePlay/GamePlayManager"),d=e("./UserMgr"),y=cc._decorator,v=y.ccclass,g=y.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.serverURL=f.default.serverURL,t.port=f.default.port,t.numPlayer=2,t.isLeaveGame=!1,t.loginNode=null,t.menuNode=null,t.lobbyNode=null,t.gameNode=null,t.gamePlay=null,t.Loading=null,t.resultsText=null,t.listPlayers=[],t.listAmmo=[],t.gameState=c.GAME_STATE.LOGIN_MENU,t.client=null,t.room=null,t.roomSessionID="",t.roomId="",t.playerName="",t.playerIcon=0,t.playerOPtion=1,t.gamePlayManage=null,t.useSSL=!1,t}var n;return r(t,e),n=t,t.prototype.onLoad=function(){n._instance=this.getComponent(n),this.gameState=c.GAME_STATE.LOGIN_MENU,this.handleGameState(),this.serverURL,this.port,this.client=new u.Client((this.useSSL?"wss":"ws")+"://"+this.serverURL+([443,80].includes(2567)||this.useSSL?"":":"+this.port))},t.prototype.start=function(){},t.prototype.handleGameState=function(){this.loginNode.active=this.gameState==c.GAME_STATE.LOGIN_MENU,this.menuNode.active=this.gameState==c.GAME_STATE.MAINMENU_MENU,this.lobbyNode.active=this.gameState==c.GAME_STATE.LOBBY_MENU,this.gameNode.active=this.gameState==c.GAME_STATE.GAME_PLAY,this.gamePlay.active=this.gameState==c.GAME_STATE.GAME_PLAY},t.prototype.getLinkShare=function(){var e=window.location.href,t=e.indexOf("?")+1;return e.slice(0,t-1)+"/?type=client"},t.prototype.getRoomId=function(){return this.room.id},t.prototype.create=function(){return s(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,this.joingame()];case 1:return e.sent(),[2]}})})},t.prototype.join=function(e,t,n){return void 0===n&&(n=""),s(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,this.joingame(n)];case 1:return e.sent(),[2]}})})},t.prototype.joingame=function(e){var t;return void 0===e&&(e=""),s(this,void 0,void 0,function(){var o,r,i=this;return a(this,function(s){switch(s.label){case 0:return""!=e?[3,2]:[4,null===(t=this.client)||void 0===t?void 0:t.getAvailableRooms().then(function(t){for(var n=0;n<t.length;n++)e=t[n].roomId})];case 1:s.sent(),s.label=2;case 2:return""!=e?[3,4]:(o=this,[4,this.client.create(f.default.serverName,{address:d.default.instance.address})]);case 3:return o.room=s.sent(),[3,6];case 4:return r=this,[4,this.client.joinById(e,{address:d.default.instance.address})];case 5:r.room=s.sent(),s.label=6;case 6:return this.room.state.players.onAdd=function(e,t){i.ShowLoading(!1),i.gameState=c.GAME_STATE.LOBBY_MENU,i.handleGameState();var o=i.lobbyNode.getComponent(l.LobbyManager);i.listPlayers.push(e),i.roomSessionID=i.room.sessionId,null==o||o.CreatePlayer(e,0==i.room.sessionId.localeCompare(e.id)),e.onChange=function(e){e.forEach(function(e){n._instance.ParseChangePlayer(t,e.field,e.value)})},e.triggerAll()},this.room.state.bulletArr.onAdd=function(e){null!==i.gamePlayManage&&i.gamePlayManage.OnCreateBullet(e),e.onChange=function(t){t.forEach(function(t){n._instance.ParseBulletChange(e.index,t.field,t.value)})},e.triggerAll()},this.room.state.itemCollect.onAdd=function(e){i.listAmmo.push(e),null!==i.gamePlayManage&&3===i.room.state.roomStatus&&i.gamePlayManage.OnCreateAmmoIngame(e),e.onChange=function(t){t.forEach(function(t){n._instance.ParseAmmoChange(e.index,t.field,t.value)})},e.triggerAll()},this.room.state.players.onRemove=function(e,t){var o=i.listPlayers.findIndex(function(e){return e.id===t});if(null!=o&&o>-1&&i.listPlayers.splice(o,1),n._instance.gameState===c.GAME_STATE.LOBBY_MENU){var r=i.lobbyNode.getComponent(l.LobbyManager);i.roomSessionID=i.room.sessionId,null==r||r.RemovePlayer(t)}},this.room.state.bulletArr.onRemove=function(e){var t,n,o,r=null===(t=i.gamePlayManage)||void 0===t?void 0:t.listBullet.findIndex(function(t){return t.index===e.index});null!=r&&r>-1&&(null===(n=i.gamePlayManage)||void 0===n||n.listBullet[r].node.destroy(),null===(o=i.gamePlayManage)||void 0===o||o.listBullet.splice(r,1))},this.room.state.itemCollect.onRemove=function(e){var t,n,o,r;null===(t=i.gamePlayManage)||void 0===t||t.listAmmo.forEach(function(){});var s=null===(n=i.gamePlayManage)||void 0===n?void 0:n.listAmmo.findIndex(function(t){return t.index===e.index});null!=s&&s>-1&&(null===(o=i.gamePlayManage)||void 0===o||o.listAmmo[s].node.destroy(),null===(r=i.gamePlayManage)||void 0===r||r.listAmmo.splice(s,1))},this.room.onLeave(function(){i.isLeaveGame=!1,i.tryConnectInterval=setInterval(i.tryConnect.bind(i),1e3)}),this.room.state.onChange=function(e){var t=i.lobbyNode.getComponent(l.LobbyManager),o=i.gameNode.getComponent(p.default);null==i.gamePlayManage&&(i.gamePlayManage=i.gamePlay.getComponent(h.GamePlayManager)),e.forEach(function(e){var r,s;e.field===f.default.maxPlayer&&(n._instance.numPlayer=e.value),e.field===f.default.timeWaiting&&(null==t||t.CountDownChange(e.value)),e.field===f.default.timeCountdown&&(null==o||o.CountDownChange(e.value)),e.field===f.default.roomStatus&&2==e.value&&i.enterGamePlay(),e.field===f.default.mapSize&&(null===(r=i.gamePlayManage)||void 0===r||r.UpdateDangerAround(e.value)),e.field===f.default.nextSize&&(null===(s=i.gamePlayManage)||void 0===s||s.UpdateNextDangerAround(e.value))})},this.room.onError.once(function(){i.showEndgame("And error has occurred, sorry!")}),this.room.state.itemArr.onRemove=function(){},[2]}})})},t.prototype.showEndgame=function(e){this.room.leave(),this.resultsText.string=e,this.handleGameState(),clearInterval(this.countdownInterval),clearInterval(this.tryConnectInterval)},t.prototype.tryConnect=function(){},t.prototype.enterGamePlay=function(){this.gameState=c.GAME_STATE.GAME_PLAY,this.handleGameState()},t.prototype.playerActionMove=function(e,t){var n={session:this.room.sessionId,action:e,angle:t};this.room.send(f.default.action,n)},t.prototype.playerLeaveRoom=function(){console.log("playerLeaveRoom!"),this.room.leave();var e=this.listPlayers.length;this.listPlayers.splice(0,e),e=this.listAmmo.length,this.listAmmo.splice(0,e)},t.prototype.playerLeaveGame=function(){var e;this.room.leave(),null===(e=this.gamePlayManage)||void 0===e||e.OnLeaveRoom();var t=this.listPlayers.length;this.listPlayers.splice(0,t),t=this.listAmmo.length,this.listAmmo.splice(0,t)},t.prototype.playerActionShoot=function(e){var t={session:this.room.sessionId,action:e};this.room.send(f.default.action,t)},t.prototype.ParseChangePlayer=function(e,t,o){if(null!=this.gamePlayManage){var r=this.gamePlayManage.listCharacter.find(function(t){return t.playerID===e});if(t===f.default.position&&(null==r||r.UpdatePosition(o),n._instance.roomSessionID===e&&this.gamePlayManage.UpdateCameraFloow(new cc.Vec3(o.x,o.y,0))),t===f.default.health&&(null==r||r.UpdateHealth(o)),t===f.default.action&&(null==r||r.UpdateAction(o)),t===f.default.angle&&(null==r||r.UpdateAngle(o)),t===f.default.bullets&&e===n._instance.roomSessionID&&this.gamePlayManage.UpdateNumberBullet(o),t===f.default.rank){if(o>1){var i=this.gameNode.getComponent(p.default);null==i||i.AliveChange()}e===n._instance.roomSessionID&&this.gamePlayManage.UpdateResult(o)}t===f.default.reward&&e===n._instance.roomSessionID&&this.gamePlayManage.UpdateCoin(o)}},t.prototype.ParseBulletChange=function(e,t,n){var o=this.gamePlayManage.listBullet.find(function(t){return t.index===e});t===f.default.position&&(null==o||o.UpdatePosition(n)),t===f.default.angle&&(null==o||o.UpdateAngle(n))},t.prototype.ParseAmmoChange=function(e,t,n){var o=this.gamePlayManage.listAmmo.find(function(t){return t.index===e});t===f.default.position&&(null==o||o.UpdatePosition(n))},t.prototype.getRandomInt=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e)+e)},t.prototype.ShowLoading=function(e){this.Loading.active=e},t._instance=null,i([g],t.prototype,"numPlayer",void 0),i([g({type:cc.Node})],t.prototype,"loginNode",void 0),i([g({type:cc.Node})],t.prototype,"menuNode",void 0),i([g({type:cc.Node})],t.prototype,"lobbyNode",void 0),i([g({type:cc.Node})],t.prototype,"gameNode",void 0),i([g({type:cc.Node})],t.prototype,"gamePlay",void 0),i([g({type:cc.Node})],t.prototype,"Loading",void 0),i([g({type:cc.Label})],t.prototype,"resultsText",void 0),i([g],t.prototype,"useSSL",void 0),n=i([v("SceneManager")],t)}(cc.Component);n.default=m,cc._RF.pop()},{"./GamePlay/GamePlayManager":"GamePlayManager","./GamePlay/GamePlayUI":"GamePlayUI","./Lobby/LobbyManager":"LobbyManager","./UserMgr":"UserMgr","./Utils/GameCofig":"GameCofig","./Utils/GameDefine":"GameDefine","colyseus.js":2}],SoundChannel:[function(e,t,n){"use strict";cc._RF.push(t,"6dc45P3D5FJkb7O5zzvC7OK","SoundChannel");var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0}),n.FADE=void 0;var r,i=e("./SoundManager"),s=cc._decorator,a=s.ccclass,c=(s.property,.01);(function(e){e[e.NA=0]="NA",e[e.IN=1]="IN",e[e.OUT=2]="OUT",e[e.INOUT=3]="INOUT"})(r=n.FADE||(n.FADE={}));var u=function(){function e(e){this._playID=-1,this._clipID=null,this._channel=-1,this._currentFade=r.NA,this._FADE_IN_RATE=c,this._FADE_OUT_RATE=c,this.isFadeInComplete=!1,this.isFadeOutComplete=!1,this._channel=e}return e.prototype.play=function(e,t,n,o,s){void 0===o&&(o=!1),void 0===s&&(s=r.NA),this._clipID==e&&this.isPlaying()&&!o||(this._clipID=e,this._currentFade=s,this._MAX_SOUND_VOLUME=t,this._FADE_IN_RATE=t/100,this._FADE_OUT_RATE=t/100,s!=r.IN&&s!=r.INOUT||(t=5e-4),this._currentVolume=t,this._playID=i.default.inst.playSound(e,t,n),this.isFadeInComplete=!1,this.isFadeOutComplete=!1)},e.prototype.getPlayID=function(){return this._playID},e.prototype.getClip=function(){return this._clipID},e.prototype.isPlaying=function(){return i.default.inst.isSoundPlaying(this._playID)},e.prototype.setVolume=function(e){-1!=this._playID&&i.default.inst.setVolume(this._playID,e)},e.prototype.getMaxVolume=function(){return this._MAX_SOUND_VOLUME},e.prototype.getVolume=function(){return this._currentVolume},e.prototype.stop=function(e){void 0===e&&(e=!1),-1!=this._playID&&i.default.inst.stopSound(this._playID),this._playID=-1,this._clipID=-1,this._currentFade=r.NA},e.prototype.FadeOut=function(e){void 0===e&&(e=c),this._currentFade=r.OUT,this._FADE_OUT_RATE=e},e.prototype.FadeIn=function(e){void 0===e&&(e=c),this._currentFade=r.IN,this._FADE_IN_RATE=e},e.prototype.update=function(){if(this._currentFade!=r.NA&&this.isPlaying()){var e=this._currentFade;switch(e==r.INOUT&&(e=this.isFadeInComplete?r.OUT:r.IN),e){case r.IN:this._currentVolume<this._MAX_SOUND_VOLUME&&(this._currentVolume+=this._FADE_IN_RATE,this._currentVolume>=this._MAX_SOUND_VOLUME&&(this._currentVolume=this._MAX_SOUND_VOLUME,this.isFadeInComplete=!0),this.setVolume(this._currentVolume));break;case r.OUT:this._currentVolume>0&&(this._currentVolume-=this._FADE_OUT_RATE,this._currentVolume<=0&&(this._currentVolume=0,this.isFadeOutComplete=!0),this.setVolume(this._currentVolume))}}},e.prototype.onComplete=function(e){-1!=this._playID&&i.default.inst.onComplete(this._playID,e)},o([a],e)}();n.default=u,cc._RF.pop()},{"./SoundManager":"SoundManager"}],SoundID:[function(e,t,n){"use strict";cc._RF.push(t,"bb344DjZYFNAbhaGWjTBOYb","SoundID");var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,i=r.ccclass,s=(r.property,function(){function e(e){this._id=-1,this._clip=e}return e.prototype.setPlayID=function(e){this._id=e},e.prototype.getClip=function(){return this._clip},e.prototype.getPlayID=function(){return this._id},o([i],e)}());n.default=s,cc._RF.pop()},{}],SoundManager:[function(e,t,n){"use strict";cc._RF.push(t,"1533ddzZHNHW6DeTyanOEVn","SoundManager");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0}),n.SOUND_INDEX=n.AudioClips=void 0;var s,a,c=e("./Utils/Util"),u=e("./Utils"),l=e("./SoundChannel"),f=cc._decorator,p=f.ccclass,h=f.property;(function(e){e[e.click=0]="click",e[e.eat=1]="eat",e[e.error=2]="error",e[e.eating=3]="eating",e[e.eatingchew=4]="eatingchew",e[e.LENGTH=5]="LENGTH"})(s=n.AudioClips||(n.AudioClips={})),function(e){e[e.CHANNEL=0]="CHANNEL",e[e.VOLUME=1]="VOLUME",e[e.PRIORITY=2]="PRIORITY",e[e.LENGTH=3]="LENGTH"}(a=n.SOUND_INDEX||(n.SOUND_INDEX={}));var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.SOUND_INFO=[0,.7,0,1,.5,0,2,.5,0,3,1,0,3,1,0],t.musicChannel=null,t.useSound=!0,t.startScreenMusicClip=null,t.inGameMusicClip=null,t.click=null,t.eat=null,t.error=null,t.eating=null,t.eatingchew=null,t.SoundIDs=[],t._channels=[],t._channelLength=0,t}var n;return r(t,e),n=t,t.prototype.onLoad=function(){n.inst=this},t.prototype.isSoundPlaying=function(e){return cc.audioEngine.getState(e)==cc.audioEngine.AudioState.PLAYING},t.prototype.stopMusic=function(){cc.audioEngine.stopMusic()},t.prototype.playStartScreenMusic=function(){this.stopMusic(),cc.audioEngine.playMusic(this.startScreenMusicClip,!0),cc.audioEngine.setMusicVolume(.3)},t.prototype.playGameMusic=function(){this.stopMusic(),cc.audioEngine.playMusic(this.inGameMusicClip,!0),cc.audioEngine.setMusicVolume(.3)},t.prototype.start=function(){this._channelLength=this.SOUND_INFO.length/a.LENGTH;for(var e=0;e<this._channelLength;e++)this._channels.push(new l.default(e))},t.prototype._playSFX=function(e,t,n){var o=null;return null!=e&&this.useSound&&(o=cc.audioEngine.playEffect(e,n||!1),cc.audioEngine.setVolume(o,t)),o},t.prototype.onComplete=function(e,t){cc.audioEngine.setFinishCallback(e,t)},t.prototype.playSound=function(e,t,n){(!t||t>1)&&(t=1),t<0&&(t=0);var o=this[u.default.enumToString(s,e)];return Array.isArray(this[u.default.enumToString(s,e)])&&(o=c.default.randomArr(this[u.default.enumToString(s,e)])),this._playSFX(o,t,n)},t.prototype.stopSound=function(e){cc.audioEngine.stopEffect(e)},t.prototype.setVolume=function(e,t){t<0&&(t=0),cc.audioEngine.setVolume(e,t)},t.prototype.getVolume=function(e){return cc.audioEngine.getVolume(e)},t.prototype.playSFX=function(e,t,n,o){void 0===t&&(t=!1),void 0===n&&(n=!1),void 0===o&&(o=l.FADE.NA);var r=this.SOUND_INFO[e*a.LENGTH+a.CHANNEL],i=this.SOUND_INFO[e*a.LENGTH+a.VOLUME];return this._channels[r].play(e,i,t,n,o),this._channels[r]},t.prototype.isPlayingSFX=function(e){for(var t=0;t<this._channelLength;t++){var n=this._channels[t];if(n.getClip()==e&&n.isPlaying())return!0}return!1},t.prototype.stopSFX=function(e){for(var t=0;t<this._channelLength;t++){var n=this._channels[t];if(n.getClip()==e&&n.isPlaying()){n.stop();break}}},t.prototype.stopSFXByChannel=function(e){var t=this._channels[e];t.isPlaying()&&t.stop()},t.prototype.stopAllSFX=function(){for(var e=0;e<this._channelLength;e++){var t=this._channels[e];t.isPlaying()&&t.stop()}},t.prototype.update=function(){this.useSound&&this._channels.forEach(function(e){e&&e.update()})},t.inst=null,i([h(Boolean)],t.prototype,"useSound",void 0),i([h({type:cc.AudioClip})],t.prototype,"startScreenMusicClip",void 0),i([h({type:cc.AudioClip})],t.prototype,"inGameMusicClip",void 0),i([h({type:cc.AudioClip})],t.prototype,"click",void 0),i([h({type:cc.AudioClip})],t.prototype,"eat",void 0),i([h({type:cc.AudioClip})],t.prototype,"error",void 0),i([h({type:cc.AudioClip})],t.prototype,"eating",void 0),i([h({type:cc.AudioClip})],t.prototype,"eatingchew",void 0),n=i([p],t)}(cc.Component);n.default=d,cc._RF.pop()},{"./SoundChannel":"SoundChannel","./Utils":void 0,"./Utils/Util":void 0}],UserMgr:[function(e,t,n){"use strict";cc._RF.push(t,"7b882E7zlRHI6q6TyOf0H25","UserMgr");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var n;return r(t,e),n=t,t.prototype.onLoad=function(){null==n.instance&&(n.instance=this)},t.instance=null,n=i([a],t)}(cc.Component));n.default=c,cc._RF.pop()},{}],Utils:[function(e,t,n){"use strict";cc._RF.push(t,"725c63LiIdCT7r3/ZxAGt8c","Utils"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.enumToString=function(e,t){for(var n in e)if(e[n]==t)return n;return null},e.parseURLParams=function(e){var t,n,o,r,i=e.indexOf("?")+1,s=e.indexOf("#")+1||e.length+1,a=e.slice(i,s-1),c=a.replace(/\+/g," ").split("&"),u={};if(a!==e&&""!==a){for(t=0;t<c.length;t++)r=c[t].split("=",2),n=decodeURIComponent(r[0]),o=decodeURIComponent(r[1]),u.hasOwnProperty(n)||(u[n]=[]),u[n].push(2===r.length?o:null);return u}},e}();n.default=o,cc._RF.pop()},{}],Util:[function(e,t,n){"use strict";cc._RF.push(t,"240be7avYxOGIqrKf0AOkeT","Util");var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function s(e){try{c(o.next(e))}catch(t){i(t)}}function a(e){try{c(o.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((o=o.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(e){return function(t){return c([e,t])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(a){i=[6,a],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){}return e.getHttp=function(e,t,n,o){void 0===o&&(o=null);var r=new XMLHttpRequest,i="";if(t&&Array.isArray(t)&&t.length>0)for(var s=0;s<t.length;s++)i=0==s?i+"?"+t[s][0]+"="+t[s][1]:i+"&"+t[s][0]+"="+t[s][1];else if("object"==typeof t){for(var a in i+="?",t)i+=a+"="+t[a]+"&";i=i.substr(0,i.length-1)}var c=e+i;c.includes("?")?c+="&dummy="+Date.now().toString():c+="?dummy="+Date.now().toString(),r.open("GET",c,!0),r.onloadend=function(){console.log("http.status"+r.status),console.log(r),4==r.readyState&&200==r.status?n(null,r.responseText):4==r.readyState&&n(r.responseText,null)},r.onerror=function(t){console.log("Error getting URL "+e+": "+t),n(t,null)},r.ontimeout=function(t){console.log("Timeout getting URL "+e),n(t,null)},o&&r.setRequestHeader("Authorization","Bearer "+o),r.send()},e.parseFunctionCallString=function(e){var t=[],n=/([a-zA-Z_$][-a-zA-Z_$0-9]*).*/.exec(e);if(!n)return[];var o=n[1].trim();return t[0]=o,(n=/.*\((.*)\)/.exec(e))&&n[1].trim().split(",").forEach(function(e){var n=e.trim();n.length>0&&t.push(n)}),t},e.postHttp=function(e,t,n,o){return void 0===n&&(n="application/json"),void 0===o&&(o=null),new Promise(function(r,i){var s=new XMLHttpRequest;console.log("pars:",t),s.open("POST",e,!0),s.setRequestHeader("Content-type",n),s.onloadend=function(){4==s.readyState&&200==s.status?r(s.response):4==s.readyState&&i(s.response)},s.onerror=function(t){i("Error post URL "+e+": "+t)},s.ontimeout=function(){i("Timeout post URL "+e)},o&&s.setRequestHeader("Authorization","Bearer "+o),s.send(t)})},e.addQuery=function(e,t){return e.indexOf("?")>=0?e+"&"+t:e+"?"+t},e.showPopup=function(e,t,n,o,r){void 0===t&&(t=null),void 0===n&&(n=null),void 0===o&&(o=null),void 0===r&&(r=null);var i=n||1,s=o||.015,a=r||.08,c=cc.sequence(cc.scaleTo(a,i+s),cc.scaleTo(a,i-s),cc.scaleTo(a,i));e.scale=i,e.runAction(c)},e.numberRaise=function(e,t,n,o,r){void 0===o&&(o=null),void 0===r&&(r=null),null==o&&(o=""),null==r&&(r="");for(var i=e.string,s=0;s<i.length;s++)i=i.replace(".","");i=(i=i.replace(o,"")).replace(r,"");var a=parseInt(i);if(t!=a){t=Math.round(t);var c=function(e){return e?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."):"0"};("number"!=typeof a||isNaN(a))&&(a=0);var u=a,l=(t-a)/30;e.node.stopAllActions;var f=cc.sequence(cc.delayTime(.03),cc.callFunc(function(){u+=l,e.string=r+c(Math.round(u))+o,(u>=t&&t>a||u<=t&&t<a)&&(e.string=r+c(t)+o)}));e.node.runAction(cc.sequence(cc.scaleTo(.2,2),cc.repeat(f,31),cc.scaleTo(.2,1)))}},e.changeParent=function(e,t){if(e.parent!=t){var n=function(e){var t=e,n=t.angle;do{n+=(t=t.parent).angle}while(null!=t.parent);return n%360},o=n(e)-n(t),r=e.convertToWorldSpaceAR(cc.v2(0,0)),i=t.convertToNodeSpaceAR(r);e.parent=t,e.position=i,e.angle=o}},e.clearChild=function(e){e.removeAllChildren()},e.randomArr=function(e){return e[Math.floor(Math.random()*e.length)]},e.randomFromTo=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},e.shuffleArr=function(e){for(var t,n=e.length-1;n>0;n--){var o=Math.floor(Math.random()*(n+1));t=[e[o],e[n]],e[n]=t[0],e[o]=t[1]}return e},e.differenceOf2Arrays=function(e,t){var n=[];for(var o in e=e.toString().split(",").map(Number),t=t.toString().split(",").map(Number),e)-1===t.indexOf(e[o])&&n.push(e[o]);for(o in t)-1===e.indexOf(t[o])&&n.push(t[o]);return n.sort(function(e,t){return e-t})},e.intersect_arrays=function(e,t){for(var n=e.concat().sort(),o=t.concat().sort(),r=[],i=0,s=0;i<e.length&&s<t.length;)n[i]===o[s]?(r.push(n[i]),i++,s++):n[i]<o[s]?i++:s++;return r},e.union_arrays=function(e,t){for(var n={},o=e.length-1;o>=0;--o)n[e[o]]=e[o];for(o=t.length-1;o>=0;--o)n[t[o]]=t[o];var r=[];for(var i in n)n.hasOwnProperty(i)&&r.push(n[i]);return r},e.sumArr=function(e){var t=0;return e.forEach(function(e){t+=e}),t},e.getUrlParameter=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))},e.randomProperty=function(e){var t=Object.keys(e);return e[t[t.length*Math.random()<<0]]},e.compareObj=function(e,t){for(var n in e){if(e.hasOwnProperty(n)!==t.hasOwnProperty(n))return!1;switch(typeof e[n]){case"object":if(!this.compareObj(e[n],t[n]))return!1;break;case"function":if(void 0===t[n]||"compare"!=n&&e[n].toString()!=t[n].toString())return!1;break;default:if(e[n]!=t[n])return!1}}for(var n in t)if(void 0===e[n])return!1;return!0},e.arrayUnion=function(e,t){for(var n=e.concat(t),o=0;o<n.length;o++)for(var r=o+1;r<n.length;r++)this.compareObj(n[o],n[r])&&(n.splice(r,1),r--);return n},e.cloneNumberArray=function(e){return JSON.parse(JSON.stringify(e))},e.getWorldPos=function(e){return e.convertToWorldSpaceAR(cc.v2(0,0))},e.setWorldPos=function(e,t){e.setPosition(e.parent.convertToNodeSpaceAR(t))},e.enumToString=function(e,t){for(var n in e)if(e[n]==t)return n;return null},e.loadPrefab=function(e){return o(this,void 0,Promise,function(){var t;return r(this,function(n){switch(n.label){case 0:return t=null,[4,new Promise(function(t,n){cc.loader.loadRes(e,function(e){if(e)return cc.error(e.message||e),void n(e);t()})}).then(function(e){t=e})];case 1:return n.sent(),[2,t]}})})},e.getHash=function(e){for(var t=0,n=e.length,o=0;o<n;o++)t=(t<<5)-t+e.charCodeAt(o),t|=0;return t},e.getKeys=function(e){var t=[];for(var n in e)t.push(n);return t},e.loadSpriteFrameFromURL=function(e){return new Promise(function(t,n){cc.loader.load({url:e,type:"jpg"},function(e,o){if(e)n(e);else{var r=new cc.SpriteFrame(o);t(r)}})})},e.spawCoin=function(e,t,n,o){e=cc.find("Canvas").convertToNodeSpaceAR(e),t=cc.find("Canvas").convertToNodeSpaceAR(t);for(var r=function(n){var r=cc.instantiate(o);r.parent=cc.find("Canvas"),r.active=!0,r.setPosition(e),r.opacity=0,r.runAction(cc.sequence(cc.delayTime(.05*n),cc.fadeIn(0),cc.spawn(cc.jumpTo(.6,t,t.y-100-200*Math.random(),1),cc.rotateBy(.6,360)),cc.callFunc(function(){r.destroy()})))},i=0;i<n;i++)r(i)},e}();n.default=i,cc._RF.pop()},{}],Vector:[function(e,t,n){"use strict";cc._RF.push(t,"70190hq8kdHB4l+g+xRODjS","Vector");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0}),n.Vector=void 0;var s=e("@colyseus/schema"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),i([s.type("number")],t.prototype,"x",void 0),i([s.type("number")],t.prototype,"y",void 0),t}(s.Schema);n.Vector=a,cc._RF.pop()},{"@colyseus/schema":1}],Web3Service:[function(e,t,n){"use strict";cc._RF.push(t,"9dc5a+o/NVI2ouTe2Hg4PLu","Web3Service");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function s(e){try{c(o.next(e))}catch(t){i(t)}}function a(e){try{c(o.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(e){return function(t){return c([e,t])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(a){i=[6,a],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=e("../../Scripts/SceneManager"),u=e("../ErrorPopup"),l=e("../LoginMenuManager"),f=e("../UserMgr"),p=e("../Utils/GameDefine"),h=e("./ApiService"),d=cc._decorator,y=d.ccclass,v=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.s_teleID="",t}var n;return r(t,e),n=t,t.prototype.onLoad=function(){n.instance=this.getComponent(n)},t.prototype.start=function(){this.CheckPrivateKeyTele()},t.prototype.CheckPrivateKeyTele=function(){return s(this,void 0,void 0,function(){var e,t,n;return a(this,function(o){switch(o.label){case 0:return c.default._instance.ShowLoading(!0),window.Telegram?[4,window.Telegram.WebApp.initData]:[3,3];case 1:return e=o.sent(),[4,window.Telegram.WebApp.initDataUnsafe];case 2:o.sent()&&(this.s_teleID=e),o.label=3;case 3:return console.log("this.s_teleID = ",this.s_teleID),l.LoginMenuManager._instance.ShowTeleID(this.s_teleID),""===this.s_teleID?[3,5]:(t={auth:this.s_teleID},console.log("this.s_teleID 3333 = ",this.s_teleID),[4,h.default.instance.requestGetUserInfo(t)]);case 4:return n=o.sent(),console.log("CheckPrivateKeyTele = ",n),n&&"404 Error."!==n.error?n.message&&""!==n.message?u.default.instance.ShowErrorPopup(n.message):(f.default.instance._id=n._id,f.default.instance.amount=n.amount,f.default.instance.address=n.address,f.default.instance.privateKey=n.privateKey,f.default.instance.teleId=n.teleId,c.default._instance.gameState=p.GAME_STATE.MAINMENU_MENU,c.default._instance.handleGameState()):u.default.instance.ShowErrorPopup("Error when call API"),[3,6];case 5:console.log("this.s_teleID 1111 = ",this.s_teleID),u.default.instance.ShowErrorPopup("Cannot Get Tele ID"),o.label=6;case 6:return c.default._instance.ShowLoading(!1),[2]}})})},t.prototype.CheckPrivateKeyTeleTest=function(){return s(this,void 0,void 0,function(){var e,t;return a(this,function(n){switch(n.label){case 0:return c.default._instance.ShowLoading(!0),this.s_teleID="1424286035",console.log("this.s_teleID = ",this.s_teleID),l.LoginMenuManager._instance.ShowTeleID(this.s_teleID),""===this.s_teleID?[3,2]:(e={teleId:this.s_teleID},console.log("this.s_teleID 3333 = ",this.s_teleID),[4,h.default.instance.requestGetUserInfoTest(e)]);case 1:return t=n.sent(),console.log("CheckPrivateKeyTele = ",t),t&&"404 Error."!==t.error?t.message&&""!==t.message?u.default.instance.ShowErrorPopup(t.message):(f.default.instance._id=t._id,f.default.instance.amount=t.amount,f.default.instance.address=t.address,f.default.instance.privateKey=t.privateKey,f.default.instance.teleId=t.teleId,c.default._instance.gameState=p.GAME_STATE.MAINMENU_MENU,c.default._instance.handleGameState()):u.default.instance.ShowErrorPopup("Error when call API"),[3,3];case 2:console.log("this.s_teleID 1111 = ",this.s_teleID),u.default.instance.ShowErrorPopup("Cannot Get Tele ID"),n.label=3;case 3:return c.default._instance.ShowLoading(!1),[2]}})})},t.instance=null,n=i([y],t)}(cc.Component));n.default=v,cc._RF.pop()},{"../../Scripts/SceneManager":"SceneManager","../ErrorPopup":"ErrorPopup","../LoginMenuManager":"LoginMenuManager","../UserMgr":"UserMgr","../Utils/GameDefine":"GameDefine","./ApiService":"ApiService"}],nCSV:[function(e,t,n){"use strict";cc._RF.push(t,"e2bb4h/dglGeIIe9YYGWyvQ","nCSV"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.parseLineSingle=function(e){for(var t=[],n=e.length,o=!1,r="",i=0;i<n;i++){var s=e.charAt(i);if(!/\s/.test(s)){if(o){if('"'==s){o=!1;continue}}else if('"'==s){o=!0;continue}","!=s||o?r+=s:(t.push(r),r="")}}return r.length>0&&t.push(r),t},e.parseParameters=function(t){var n=t.split("\r\n"),o={};return n.forEach(function(t){if(t.startsWith("#")){var n=e.parseLineSingle(t),r=n[0].substr(1);o[r]=n[1]}}),o},e.parseTable=function(t){if(!t)return!1;var n=t.split("\r\n"),o=[];n.forEach(function(e){e.startsWith("#")||o.push(e)});for(var r=e.parseLineSingle(o[0]),i=o.length,s=r.length,a=[],c=1;c<i;c++){for(var u=e.parseLineSingle(o[c]),l={},f=0;f<s;f++)f>=u.length?l[r[f]]="":l[r[f]]=u[f];a.push(l)}return a},e}();n.default=o,cc._RF.pop()},{}]},{},["ApiService","Web3Service","ErrorPopup","AmmonController","BulletController","CharacterController","CollisionObject","GamePlayManager","GamePlayUI","HealthFly","JoystickController","LoadingMgr","LobbyManager","PlayerItemManager","LoginMenuManager","MainMenuManager","PlayerManager","SceneManager","Bullet","Item","MyRoomState","Player","Vector","SoundChannel","SoundID","SoundManager","UserMgr","Utils","GameCofig","GameDefine","Util","nCSV"]);